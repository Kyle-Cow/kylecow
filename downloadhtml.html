<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™ºèƒ½HTMLè½‰æ›å™¨ - å¢å¼·ç‰ˆ</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #27ae60;
            --warning-color: #e74c3c;
            --light-bg: #f5f6fa;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: var(--light-bg);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .converter-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #eee;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .converter-section:hover {
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .editor-preview {
            display: grid;
            grid-template-columns: 1fr;
            gap: 25px;
            margin: 20px 0;
        }

        @media (min-width: 768px) {
            .editor-preview {
                grid-template-columns: 1fr 1fr;
            }
        }

        textarea {
            width: 100%;
            height: 300px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 14px;
            resize: vertical;
            line-height: 1.5;
        }

        .preview-container {
            position: relative;
            height: 300px;
        }

        .preview-frame {
            width: 100%;
            height: 100%;
            border: 2px solid #ddd;
            border-radius: 6px;
            background: white;
        }

        .preview-controls {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 100;
            display: flex;
            gap: 5px;
        }

        .preview-btn {
            background: rgba(44, 62, 80, 0.7);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 5px 10px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s ease;
        }

        .preview-btn:hover {
            background: rgba(44, 62, 80, 0.9);
        }

        .controls {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin: 20px 0;
        }

        button {
            background: var(--secondary-color);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        button:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        button.success-btn {
            background: var(--accent-color);
        }

        button.success-btn:hover {
            background: #219653;
        }

        input[type="file"], 
        input[type="text"],
        select {
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            width: 100%;
            max-width: 400px;
            transition: border-color 0.3s ease;
        }

        input[type="file"]:focus, 
        input[type="text"]:focus,
        select:focus {
            border-color: var(--secondary-color);
            outline: none;
        }

        .modification-panel {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            border-left: 4px solid var(--secondary-color);
            transition: all 0.3s ease;
        }

        .smart-edit-section {
            display: grid;
            gap: 10px;
            grid-template-columns: 1fr auto;
            margin-bottom: 15px;
        }

        h1, h2 {
            color: var(--primary-color);
            margin-bottom: 15px;
        }

        h3 {
            color: var(--primary-color);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .filename-input {
            width: 100%;
            max-width: 300px;
            padding: 12px;
        }

        .fullscreen-preview {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: white;
            z-index: 1000;
            padding: 20px;
            box-sizing: border-box;
            display: none;
        }

        .fullscreen-preview iframe {
            width: 100%;
            height: calc(100% - 60px);
            border: none;
        }

        .fullscreen-controls {
            display: flex;
            justify-content: flex-end;
            padding: 10px;
        }

        .element-navigator {
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #ddd;
            border-radius: 6px;
            padding: 10px;
            margin-top: 10px;
        }

        .element-item {
            padding: 8px;
            cursor: pointer;
            border-bottom: 1px solid #eee;
            transition: background 0.2s ease;
        }

        .element-item:hover {
            background: #f0f0f0;
        }

        .tabs {
            display: flex;
            gap: 5px;
            margin-bottom: 15px;
        }

        .tab {
            padding: 10px 15px;
            cursor: pointer;
            background: #eee;
            border-radius: 6px 6px 0 0;
            border: 1px solid #ddd;
            border-bottom: none;
        }

        .tab.active {
            background: white;
            font-weight: bold;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .status-bar {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 6px;
            margin-top: 10px;
            font-size: 14px;
            color: #555;
        }

        .modification-history {
            max-height: 150px;
            overflow-y: auto;
            border: 1px solid #eee;
            border-radius: 6px;
            margin-top: 10px;
        }

        .history-item {
            padding: 8px 12px;
            border-bottom: 1px solid #eee;
            font-size: 14px;
            display: flex;
            justify-content: space-between;
        }

        .history-item:last-child {
            border-bottom: none;
        }

        .history-action {
            color: var(--secondary-color);
            cursor: pointer;
        }

        .tooltip {
            position: relative;
            display: inline-block;
            margin-left: 5px;
        }

        .tooltip .tooltip-text {
            visibility: hidden;
            width: 200px;
            background-color: #555;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“„ æ™ºèƒ½HTMLè½‰æ›å™¨ - å¢å¼·ç‰ˆ</h1>

        <!-- æ–‡ä»¶ä¸Šå‚³å€ -->
        <div class="converter-section">
            <h2>1. æ–‡ä»¶ä¸Šå‚³</h2>
            <div class="controls">
                <input type="file" id="fileUpload" accept=".txt,.html,.htm">
                <button onclick="document.getElementById('fileUpload').click()">
                    <span>ğŸ“‚</span> é¸æ“‡æ–‡ä»¶
                </button>
                <button onclick="showTemplates()">
                    <span>ğŸ“‹</span> ä½¿ç”¨æ¨¡æ¿
                </button>
            </div>
        </div>

        <!-- ç·¨è¼¯é è¦½å€ -->
        <div class="converter-section">
            <h2>2. ç·¨è¼¯èˆ‡é è¦½</h2>
            
            <div class="tabs">
                <div class="tab active" onclick="switchTab(this, 'editorTab')">ä»£ç¢¼ç·¨è¼¯</div>
                <div class="tab" onclick="switchTab(this, 'elementTab')">å…ƒç´ ç€è¦½</div>
            </div>

            <div class="tab-content active" id="editorTab">
                <div class="editor-preview">
                    <div>
                        <h3><span>ğŸ’»</span> ä»£ç¢¼ç·¨è¼¯å™¨</h3>
                        <textarea id="htmlInput" placeholder="åœ¨æ­¤è¼¸å…¥æˆ–ç²˜è²¼HTMLä»£ç¢¼..."></textarea>
                    </div>
                    <div>
                        <h3><span>ğŸ‘ï¸</span> å¯¦æ™‚é è¦½</h3>
                        <div class="preview-container">
                            <iframe class="preview-frame" id="previewFrame"></iframe>
                            <div class="preview-controls">
                                <button class="preview-btn" onclick="toggleFullscreen()">
                                    <span>ğŸ”</span> å…¨è¢å¹•
                                </button>
                                <button class="preview-btn" onclick="refreshPreview()">
                                    <span>ğŸ”„</span> é‡æ•´
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="elementTab">
                <h3><span>ğŸ§©</span> å…ƒç´ ç€è¦½å™¨</h3>
                <p>é»æ“Šå…ƒç´ å³å¯åœ¨ç·¨è¼¯å™¨ä¸­é«˜äº®é¡¯ç¤ºå°æ‡‰ä»£ç¢¼</p>
                <div class="element-navigator" id="elementNavigator">
                    <!-- å…ƒç´ å°‡åœ¨é€™è£¡å‹•æ…‹ç”Ÿæˆ -->
                </div>
            </div>

            <div class="controls">
                <button onclick="updatePreview()">
                    <span>ğŸ”„</span> æ›´æ–°é è¦½
                </button>
                <button onclick="showModificationPanel()">
                    <span>ğŸ’¡</span> æ™ºèƒ½ä¿®æ”¹å»ºè­°
                </button>
                <button onclick="validateHTML()">
                    <span>âœ…</span> é©—è­‰HTML
                </button>
                <button onclick="formatHTML()">
                    <span>ğŸ”§</span> æ ¼å¼åŒ–ä»£ç¢¼
                </button>
            </div>

            <div class="status-bar" id="statusBar">æº–å‚™å°±ç·’ã€‚</div>
        </div>

        <!-- æ™ºèƒ½ä¿®æ”¹é¢æ¿ -->
        <div class="modification-panel" id="modificationPanel" style="display:none;">
            <h3><span>ğŸ§ </span> æ™ºèƒ½ä¿®æ”¹å»ºè­° 
                <div class="tooltip">â„¹ï¸
                    <span class="tooltip-text">é¸æ“‡é è¨­æ¨¡å¼æˆ–æ‰‹å‹•è¼¸å…¥è¦æŸ¥æ‰¾çš„å…§å®¹ï¼Œç„¶å¾Œè¼¸å…¥æ›¿æ›å…§å®¹</span>
                </div>
            </h3>
            
            <div class="tabs">
                <div class="tab active" onclick="switchModTab(this, 'quickMod')">å¿«é€Ÿä¿®æ”¹</div>
                <div class="tab" onclick="switchModTab(this, 'advancedMod')">é€²éšä¿®æ”¹</div>
                <div class="tab" onclick="switchModTab(this, 'historyMod')">ä¿®æ”¹æ­·å²</div>
            </div>
            
            <div class="tab-content active" id="quickMod">
                <div class="smart-edit-section">
                    <select id="commonActions" onchange="handleCommonAction(this.value)">
                        <option value="">é¸æ“‡å¿«é€Ÿä¿®æ”¹æ“ä½œ...</option>
                        <option value="title">ä¿®æ”¹é é¢æ¨™é¡Œ</option>
                        <option value="meta">ä¿®æ”¹é é¢æè¿°</option>
                        <option value="h1">ä¿®æ”¹ä¸»æ¨™é¡Œ</option>
                        <option value="css">å¢åŠ è‡ªå®šç¾©CSS</option>
                        <option value="responsive">å¢åŠ éŸ¿æ‡‰å¼è¨­è¨ˆmetaæ¨™ç±¤</option>
                        <option value="favicon">æ·»åŠ faviconåœ–æ¨™</option>
                        <option value="footer">æ·»åŠ é è…³</option>
                    </select>
                    <button onclick="applyQuickModification()">æ‡‰ç”¨ä¿®æ”¹</button>
                </div>
                <div id="quickModContent" style="display:none;">
                    <!-- å‹•æ…‹ç”Ÿæˆçš„è¡¨å–®å°‡åœ¨é€™è£¡é¡¯ç¤º -->
                </div>
            </div>
            
            <div class="tab-content" id="advancedMod">
                <div class="smart-edit-section">
                    <input type="text" id="searchPattern" placeholder="è¼¸å…¥è¦æŸ¥æ‰¾çš„å…§å®¹ï¼ˆæ”¯æŒæ­£å‰‡è¡¨é”å¼ï¼‰">
                    <select id="commonPatterns" onchange="fillSearchPattern(this.value)">
                        <option value="">å¸¸ç”¨æ¨¡å¼...</option>
                        <option value="<title>.*?</title>">é é¢æ¨™é¡Œ</option>
                        <option value="<meta name=\"description\".*?>">é é¢æè¿°</option>
                        <option value="<h1>.*?</h1>">ä¸»æ¨™é¡Œ</option>
                        <option value="<link.*?rel=\"stylesheet\".*?>">CSSéˆæ¥</option>
                        <option value="<div class=\".*?\">">DIVèˆ‡ç‰¹å®šé¡</option>
                        <option value="<img.*?src=\".*?\".*?>">åœ–ç‰‡æ¨™ç±¤</option>
                    </select>
                </div>
                <div class="smart-edit-section">
                    <input type="text" id="replaceContent" placeholder="è¼¸å…¥æ›¿æ›å…§å®¹...">
                    <button onclick="applyModification()">æ‡‰ç”¨ä¿®æ”¹</button>
                </div>
            </div>
            
            <div class="tab-content" id="historyMod">
                <h4>ä¿®æ”¹æ­·å²è¨˜éŒ„</h4>
                <div class="modification-history" id="modificationHistory">
                    <!-- æ­·å²è¨˜éŒ„å°‡åœ¨é€™è£¡å‹•æ…‹ç”Ÿæˆ -->
                    <div class="history-item">å°šç„¡ä¿®æ”¹è¨˜éŒ„</div>
                </div>
            </div>
        </div>

        <!-- è¼¸å‡ºè¨­ç½® -->
        <div class="converter-section">
            <h2>3. è¼¸å‡ºè¨­ç½®</h2>
            <div class="controls">
                <input type="text" id="customName" 
                       class="filename-input"
                       placeholder="è‡ªå®šç¾©æ–‡ä»¶åï¼ˆé»˜èªï¼šconverted.htmlï¼‰">
                <button class="success-btn" onclick="downloadFile()">
                    <span>ğŸ’¾</span> ä¿å­˜æ–‡ä»¶
                </button>
                <button onclick="copyToClipboard()">
                    <span>ğŸ“‹</span> è¤‡è£½åˆ°å‰ªè²¼æ¿
                </button>
            </div>
        </div>
    </div>

    <!-- å…¨è¢å¹•é è¦½æ¨¡å¼ -->
    <div class="fullscreen-preview" id="fullscreenPreview">
        <div class="fullscreen-controls">
            <button onclick="exitFullscreen()" class="preview-btn">
                <span>âŒ</span> é€€å‡ºå…¨è¢å¹•
            </button>
        </div>
        <iframe id="fullscreenFrame"></iframe>
    </div>

    <script>
        let modificationHistory = [];
        let autoSaveInterval;
        let lastSavedContent = '';

        // åˆå§‹åŒ–
        window.onload = function() {
            updatePreview();
            setAutoSave();
        };

        // è‡ªå‹•ä¿å­˜åŠŸèƒ½
        function setAutoSave() {
            autoSaveInterval = setInterval(function() {
                const currentContent = document.getElementById('htmlInput').value;
                if (currentContent !== lastSavedContent) {
                    localStorage.setItem('htmlConverterContent', currentContent);
                    lastSavedContent = currentContent;
                    updateStatus('è‡ªå‹•ä¿å­˜å®Œæˆ...');
                }
            }, 30000); // æ¯30ç§’è‡ªå‹•ä¿å­˜ä¸€æ¬¡
            
            // å˜—è©¦æ¢å¾©ä¸Šæ¬¡ç·¨è¼¯
            const savedContent = localStorage.getItem('htmlConverterContent');
            if (savedContent) {
                document.getElementById('htmlInput').value = savedContent;
                updatePreview();
                updateStatus('å·²æ¢å¾©ä¸Šæ¬¡ç·¨è¼¯çš„å…§å®¹');
            }
        }

        // æ–‡ä»¶ä¸Šå‚³è™•ç†
        document.getElementById('fileUpload').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('htmlInput').value = e.target.result;
                updatePreview();
                autoSetFilename(file.name);
                updateElementNavigator();
                updateStatus(`å·²è¼‰å…¥æ–‡ä»¶: ${file.name}`);
            };
            reader.readAsText(file);
        });

        // å¯¦æ™‚é è¦½æ›´æ–°
        function updatePreview() {
            const content = document.getElementById('htmlInput').value;
            const previewFrame = document.getElementById('previewFrame');
            previewFrame.srcdoc = sanitizeContent(content);
            setTimeout(updateElementNavigator, 1000); // ç­‰å¾…iframeè¼‰å…¥å¾Œæ›´æ–°å…ƒç´ å°èˆª
            updateStatus('é è¦½å·²æ›´æ–°');
        }

        // åˆ·æ–°é è¦½
        function refreshPreview() {
            const previewFrame = document.getElementById('previewFrame');
            previewFrame.srcdoc = previewFrame.srcdoc;
            updateStatus('é è¦½å·²é‡æ•´');
        }

        // å®‰å…¨éæ¿¾
        function sanitizeContent(content) {
            return content
                .replace(/<script\b[^>]*>([\s\S]*?)<\/script>/gi, '<!-- è…³æœ¬è¢«ç§»é™¤ä»¥ç¢ºä¿å®‰å…¨ -->')
                .replace(/ on\w+="[^"]*"/gi, '');
        }

        // è‡ªå‹•è¨­ç½®æ–‡ä»¶å
        function autoSetFilename(originalName) {
            const cleanName = originalName.replace(/\.[^/.]+$/, "");
            document.getElementById('customName').value = cleanName || 'converted';
        }

        // æ›´æ–°ç‹€æ…‹æ¬„
        function updateStatus(message) {
            const statusBar = document.getElementById('statusBar');
            statusBar.textContent = message;
            setTimeout(() => {
                statusBar.textContent = 'æº–å‚™å°±ç·’ã€‚';
            }, 3000);
        }

        // åˆ‡æ›é¸é …å¡
        function switchTab(tabElement, tabId) {
            // éš±è—æ‰€æœ‰é¸é …å¡
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // é¡¯ç¤ºé¸ä¸­çš„é¸é …å¡
            tabElement.classList.add('active');
            document.getElementById(tabId).classList.add('active');
        }

        // åˆ‡æ›ä¿®æ”¹é¸é …å¡
        function switchModTab(tabElement, tabId) {
            // éš±è—æ‰€æœ‰ä¿®æ”¹é¸é …å¡
            document.querySelectorAll('#modificationPanel .tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('#modificationPanel .tab-content').forEach(content => {
                content.classList.remove('active');
                content.style.display = 'none';
            });
            
            // é¡¯ç¤ºé¸ä¸­çš„ä¿®æ”¹é¸é …å¡
            tabElement.classList.add('active');
            document.getElementById(tabId).style.display = 'block';
            document.getElementById(tabId).classList.add('active');
        }

        // å…¨è¢å¹•é è¦½
        function toggleFullscreen() {
            const fullscreenPreview = document.getElementById('fullscreenPreview');
            const fullscreenFrame = document.getElementById('fullscreenFrame');
            const content = document.getElementById('htmlInput').value;
            
            fullscreenFrame.srcdoc = sanitizeContent(content);
            fullscreenPreview.style.display = 'block';
            updateStatus('å·²åˆ‡æ›è‡³å…¨è¢å¹•é è¦½æ¨¡å¼');
        }

        // é€€å‡ºå…¨è¢å¹•
        function exitFullscreen() {
            document.getElementById('fullscreenPreview').style.display = 'none';
            updateStatus('å·²é€€å‡ºå…¨è¢å¹•é è¦½');
        }

        // æ™ºèƒ½ä¿®æ”¹é¢æ¿
        function showModificationPanel() {
            document.getElementById('modificationPanel').style.display = 'block';
            updateStatus('æ™ºèƒ½ä¿®æ”¹é¢æ¿å·²é–‹å•Ÿ');
        }

        // å¡«å……æœç´¢æ¨¡å¼
        function fillSearchPattern(value) {
            if (value) document.getElementById('searchPattern').value = value;
        }

        // è™•ç†å¸¸ç”¨ä¿®æ”¹
        function handleCommonAction(action) {
            const quickModContent = document.getElementById('quickModContent');
            
            if (!action) {
                quickModContent.style.display = 'none';
                return;
            }
            
            let html = '';
            
            switch(action) {
                case 'title':
                    html = `
                        <div style="margin-top:15px;">
                            <label for="newTitle">æ–°é é¢æ¨™é¡Œ:</label>
                            <input type="text" id="newTitle" style="width:100%;margin-top:5px;" placeholder="è¼¸å…¥æ–°çš„é é¢æ¨™é¡Œ">
                        </div>
                    `;
                    break;
                case 'meta':
                    html = `
                        <div style="margin-top:15px;">
                            <label for="newDescription">æ–°é é¢æè¿°:</label>
                            <input type="text" id="newDescription" style="width:100%;margin-top:5px;" placeholder="è¼¸å…¥æ–°çš„é é¢æè¿°">
                        </div>
                    `;
                    break;
                case 'h1':
                    html = `
                        <div style="margin-top:15px;">
                            <label for="newHeading">æ–°ä¸»æ¨™é¡Œ:</label>
                            <input type="text" id="newHeading" style="width:100%;margin-top:5px;" placeholder="è¼¸å…¥æ–°çš„ä¸»æ¨™é¡Œ">
                        </div>
                    `;
                    break;
                case 'css':
                    html = `
                        <div style="margin-top:15px;">
                            <label for="customCSS">è‡ªå®šç¾©CSS:</label>
                            <textarea id="customCSS" style="width:100%;height:100px;margin-top:5px;" placeholder="è¼¸å…¥è‡ªå®šç¾©CSSæ¨£å¼"></textarea>
                        </div>
                    `;
                    break;
                case 'responsive':
                    html = `
                        <div style="margin-top:15px;">
                            <p>å°‡æ·»åŠ ä»¥ä¸‹éŸ¿æ‡‰å¼è¨­è¨ˆmetaæ¨™ç±¤:</p>
                            <code>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</code>
                        </div>
                    `;
                    break;
                case 'favicon':
                    html = `
                        <div style="margin-top:15px;">
                            <label for="faviconURL">Favicon URL:</label>
                            <input type="text" id="faviconURL" style="width:100%;margin-top:5px;" placeholder="è¼¸å…¥faviconçš„URL">
                        </div>
                    `;
                    break;
                case 'footer':
                    html = `
                        <div style="margin-top:15px;">
                            <label for="footerContent">é è…³å…§å®¹:</label>
                            <textarea id="footerContent" style="width:100%;height:80px;margin-top:5px;" placeholder="è¼¸å…¥é è…³å…§å®¹"></textarea>
                        </div>
                    `;
                    break;
            }
            
            quickModContent.innerHTML = html;
            quickModContent.style.display = 'block';
        }

        // æ‡‰ç”¨å¿«é€Ÿä¿®æ”¹
        function applyQuickModification() {
            const action = document.getElementById('commonActions').value;
            if (!action) {
                alert('è«‹é¸æ“‡ä¸€å€‹ä¿®æ”¹æ“ä½œ');
                return;
            }
            
            const editor = document.getElementById('htmlInput');
            let content = editor.value;
            let modification = '';
            let description = '';
            
            switch(action) {
                case 'title':
                    const newTitle = document.getElementById('newTitle').value;
                    if (!newTitle) {
                        alert('è«‹è¼¸å…¥æ–°çš„é é¢æ¨™é¡Œ');
                        return;
                    }
                    
                    if (content.includes('<title>')) {
                        content = content.replace(/<title>.*?<\/title>/i, `<title>${newTitle}</title>`);
                    } else if (content.includes('<head>')) {
                        content = content.replace(/<head>/i, `<head>\n  <title>${newTitle}</title>`);
                    } else {
                        alert('ç„¡æ³•æ‰¾åˆ°é©åˆæ’å…¥æ¨™é¡Œçš„ä½ç½®ï¼Œè«‹ç¢ºä¿HTMLåŒ…å«headæ¨™ç±¤');
                        return;
                    }
                    
                    modification = `<title>${newTitle}</title>`;
                    description = `æ›´æ–°é é¢æ¨™é¡Œç‚º: ${newTitle}`;
                    break;
                    
                case 'meta':
                    const newDescription = document.getElementById('newDescription').value;
                    if (!newDescription) {
                        alert('è«‹è¼¸å…¥æ–°çš„é é¢æè¿°');
                        return;
                    }
                    
                    const metaTag = `<meta name="description" content="${newDescription}">`;
                    
                    if (content.includes('<meta name="description"')) {
                        content = content.replace(/<meta name="description".*?>/i, metaTag);
                    } else if (content.includes('<head>')) {
                        content = content.replace(/<head>/i, `<head>\n  ${metaTag}`);
                    } else {
                        alert('ç„¡æ³•æ‰¾åˆ°é©åˆæ’å…¥æè¿°çš„ä½ç½®ï¼Œè«‹ç¢ºä¿HTMLåŒ…å«headæ¨™ç±¤');
                        return;
                    }
                    
                    modification = metaTag;
                    description = `æ›´æ–°é é¢æè¿°`;
                    break;
                    
                case 'h1':
                    const newHeading = document.getElementById('newHeading').value;
                    if (!newHeading) {
                        alert('è«‹è¼¸å…¥æ–°çš„ä¸»æ¨™é¡Œ');
                        return;
                    }
                    
                    if (content.includes('<h1>')) {
                        content = content.replace(/<h1>.*?<\/h1>/i, `<h1>${newHeading}</h1>`);
                    } else if (content.includes('<body>')) {
                        content = content.replace(/<body>/i, `<body>\n  <h1>${newHeading}</h1>`);
                    } else {
                        alert('ç„¡æ³•æ‰¾åˆ°é©åˆæ’å…¥æ¨™é¡Œçš„ä½ç½®ï¼Œè«‹ç¢ºä¿HTMLçµæ§‹æ­£ç¢º');
                        return;
                    }
                    
                    modification = `<h1>${newHeading}</h1>`;
                    description = `æ›´æ–°ä¸»æ¨™é¡Œç‚º: ${newHeading}`;
                    break;
                    
                case 'css':
                    const customCSS = document.getElementById('customCSS').value;
                    if (!customCSS) {
                        alert('è«‹è¼¸å…¥è‡ªå®šç¾©CSSæ¨£å¼');
                        return;
                    }
                    
                    const styleTag = `<style>\n${customCSS}\n</style>`;
                    
                    if (content.includes('</head>')) {
                        content = content.replace(/<\/head>/i, `  ${styleTag}\n</head>`);
                    } else {
                        alert('ç„¡æ³•æ‰¾åˆ°é©åˆæ’å…¥CSSçš„ä½ç½®ï¼Œè«‹ç¢ºä¿HTMLåŒ…å«headæ¨™ç±¤');
                        return;
                    }
                    
                    modification = styleTag;
                    description = 'æ·»åŠ è‡ªå®šç¾©CSSæ¨£å¼';
                    break;
                    
                case 'responsive':
                    const viewportMeta = '<meta name="viewport" content="width=device-width, initial-scale=1.0">';
                    
                    if (content.includes('name="viewport"')) {
                        alert('é é¢å·²åŒ…å«viewportè¨­ç½®');
                        return;
                    }
                    
                    if (content.includes('<head>')) {
                        content = content.replace(/<head>/i, `<head>\n  ${viewportMeta}`);
                    } else {
                        alert('ç„¡æ³•æ‰¾åˆ°é©åˆæ’å…¥metaæ¨™ç±¤çš„ä½ç½®ï¼Œè«‹ç¢ºä¿HTMLåŒ…å«headæ¨™ç±¤');
                        return;
                    }
                    
                    modification = viewportMeta;
                    description = 'æ·»åŠ éŸ¿æ‡‰å¼è¨­è¨ˆmetaæ¨™ç±¤';
                    break;
                    
                case 'favicon':
                    const faviconURL = document.getElementById('faviconURL').value;
                    if (!faviconURL) {
                        alert('è«‹è¼¸å…¥faviconçš„URL');
                        return;
                    }
                    
                    const faviconLink = `<link rel="icon" href="${faviconURL}">`;
                    
                    if (content.includes('</head>')) {
                        content = content.replace(/<\/head>/i, `  ${faviconLink}\n</head>`);
                    } else {
                        alert('ç„¡æ³•æ‰¾åˆ°é©åˆæ’å…¥faviconçš„ä½ç½®ï¼Œè«‹ç¢ºä¿HTMLåŒ…å«headæ¨™ç±¤');
                        return;
                    }
                    
                    modification = faviconLink;
                    description = 'æ·»åŠ faviconåœ–æ¨™';
                    break;
                    
                case 'footer':
                    const footerContent = document.getElementById('footerContent').value;
                    if (!footerContent) {
                        alert('è«‹è¼¸å…¥é è…³å…§å®¹');
                        return;
                    }
                    
                    const footerHtml = `<footer style="margin-top: 20px; padding: 10px; border-top: 1px solid #eee; text-align: center;">\n  ${footerContent}\n</footer>`;
                    
                    if (content.includes('</body>')) {
                        content = content.replace(/<\/body>/i, `${footerHtml}\n</body>`);
                    } else {
                        alert('ç„¡æ³•æ‰¾åˆ°é©åˆæ’å…¥é è…³çš„ä½ç½®ï¼Œè«‹ç¢ºä¿HTMLåŒ…å«bodyæ¨™ç±¤');
                        return;
                    }
                    
                    modification = footerHtml;
                    description = 'æ·»åŠ é è…³å…§å®¹';
                    break;
            }
            
            editor.value = content;
            updatePreview();
            addToHistory(description, modification);
            updateStatus(`å·²æˆåŠŸ${description}`);
        }

        // é€²éšä¿®æ”¹åŠŸèƒ½
        function applyModification() {
            const search = document.getElementById('searchPattern').value;
            const replace = document.getElementById('replaceContent').value;
            const editor = document.getElementById('htmlInput');
            
            if (!search) {
                alert('è«‹è¼¸å…¥è¦æŸ¥æ‰¾çš„å…§å®¹ï¼');
                return;
            }

            try {
                const regex = new RegExp(search, 'gi');
                const matches = editor.value.match(regex);
                
                if (!matches) {
                    if (confirm('æœªæ‰¾åˆ°åŒ¹é…å…§å®¹ï¼Œæ˜¯å¦åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ æ–°å…§å®¹ï¼Ÿ')) {
                        editor.value += `\n${replace}`;
                        addToHistory('æ·»åŠ æ–°å…§å®¹', replace);
                    }
                    return;
                }

                if (confirm(`æ‰¾åˆ° ${matches.length} è™•åŒ¹é…ï¼Œæ˜¯å¦å…¨éƒ¨æ›¿æ›ï¼Ÿ`)) {
                    const oldContent = editor.value;
                    editor.value = editor.value.replace(regex, replace);
                    updatePreview();
                    addToHistory(`æ›¿æ› ${matches.length} è™•å…§å®¹`, `${search} â†’ ${replace}`);
                }
            } catch (e) {
                alert('æ­£å‰‡è¡¨é”å¼éŒ¯èª¤ï¼š' + e.message);
            }
        }

        // æ·»åŠ ä¿®æ”¹æ­·å²
        function addToHistory(action, details) {
            const timestamp = new Date().toLocaleTimeString();
            modificationHistory.unshift({
                action: action,
                details: details,
                timestamp: timestamp
            });
            
            // é™åˆ¶æ­·å²è¨˜éŒ„æ•¸é‡
            if (modificationHistory.length > 20) {
                modificationHistory.pop();
            }
            
            updateHistoryDisplay();
        }

        // æ›´æ–°æ­·å²é¡¯ç¤º
        function updateHistoryDisplay() {
            const historyContainer = document.getElementById('modificationHistory');
            
            if (modificationHistory.length === 0) {
                historyContainer.innerHTML = '<div class="history-item">å°šç„¡ä¿®æ”¹è¨˜éŒ„</div>';
                return;
            }
            
            let html = '';
            modificationHistory.forEach((item, index) => {
                html += `
                    <div class="history-item">
                        <span>${item.timestamp}: ${item.action}</span>
                        <span class="history-action" onclick="revertChange(${index})">æ’¤éŠ·</span>
                    </div>
                `;
            });
            
            historyContainer.innerHTML = html;
        }

        // æ’¤éŠ·ä¿®æ”¹ï¼ˆç°¡å–®å¯¦ç¾ï¼Œå¯¦éš›ä¸Šéœ€è¦ä¿å­˜æ¯æ¬¡ä¿®æ”¹çš„å®Œæ•´å…§å®¹æ‰èƒ½æº–ç¢ºæ’¤éŠ·ï¼‰
        function revertChange(index) {
            if (confirm('ç¢ºå®šè¦æ’¤éŠ·æ­¤ä¿®æ”¹å—ï¼Ÿ\næ³¨æ„ï¼šé€™æ˜¯ä¸€å€‹ç°¡åŒ–çš„æ’¤éŠ·åŠŸèƒ½ï¼Œå¯èƒ½ç„¡æ³•æº–ç¢ºæ¢å¾©ã€‚')) {
                modificationHistory.splice(index, 1);
                updateHistoryDisplay();
                updateStatus('å·²å˜—è©¦æ’¤éŠ·ä¿®æ”¹');
            }
        }

        // æ›´æ–°å…ƒç´ å°èˆªå™¨
        function updateElementNavigator() {
            const previewFrame = document.getElementById('previewFrame');
            const elementNavigator = document.getElementById('elementNavigator');
            
            if (!previewFrame.contentWindow.document.body) {
                elementNavigator.innerHTML = '<div class="element-item">é è¦½å°šæœªè¼‰å…¥</div>';
                return;
            }
            
            try {
                const elements = [];
                
                // æ”¶é›†é‡è¦å…ƒç´ 
                const headings = Array.from(previewFrame.contentWindow.document.querySelectorAll('h1, h2, h3'));
                const divs = Array.from(previewFrame.contentWindow.document.querySelectorAll('div[class], div[id]'));
                const links = Array.from(previewFrame.contentWindow.document.querySelectorAll('a[href]'));
                const images = Array.from(previewFrame.contentWindow.document.querySelectorAll('img'));
                
                headings.forEach(el => elements.push({
                    type: el.tagName.toLowerCase(),
                    content: el.textContent.trim().substring(0, 30),
                    selector: getElementSelector(el)
                }));
                
                divs.slice(0, 10).forEach(el => elements.push({
                    type: 'div',
                    content: (el.className || el.id || '').substring(0, 30),
                    selector: getElementSelector(el)
                }));
                
                links.slice(0, 5).forEach(el => elements.push({
                    type: 'a',
                    content: el.textContent.trim().substring(0, 30) || el.href,
                    selector: getElementSelector(el)
                }));
                
                images.slice(0, 5).forEach(el => elements.push({
                    type: 'img',
                    content: el.alt || el.src.split('/').pop(),
                    selector: getElementSelector(el)
                }));
                
                // ç”Ÿæˆå…ƒç´ åˆ—è¡¨
                let html = '';
                elements.forEach(el => {
                    html += `
                        <div class="element-item" onclick="highlightElement('${el.selector}')">
                            &lt;${el.type}&gt; ${el.content || '[ç„¡å…§å®¹]'}
                        </div>
                    `;
                });
                
                elementNavigator.innerHTML = html || '<div class="element-item">æœªæ‰¾åˆ°å…ƒç´ </div>';
            } catch (e) {
                elementNavigator.innerHTML = `<div class="element-item">è¼‰å…¥å…ƒç´ æ™‚å‡ºéŒ¯: ${e.message}</div>`;
            }
        }

        // ç²å–å…ƒç´ é¸æ“‡å™¨
        function getElementSelector(el) {
            // ç°¡å–®å¯¦ç¾ï¼Œå¯¦éš›æ‡‰ç”¨ä¸­æ‡‰è©²æœ‰æ›´è¤‡é›œçš„ç®—æ³•ä¾†ç¢ºå®šå”¯ä¸€é¸æ“‡å™¨
            if (el.id) return `#${el.id}`;
            if (el.className) return `.${el.className.split(' ')[0]}`;
            
            let selector = el.tagName.toLowerCase();
            if (el.textContent && el.textContent.trim()) {
                selector += `:contains("${el.textContent.trim().substring(0, 20)}")`;
            }
            
            return selector;
        }

        // é«˜äº®å…ƒç´ å°æ‡‰çš„ä»£ç¢¼
        function highlightElement(selector) {
            const editor = document.getElementById('htmlInput');
            const content = editor.value;
            
            // ç°¡å–®å¯¦ç¾ï¼Œå¯¦éš›ä¸Šéœ€è¦æ›´è¤‡é›œçš„è§£æä¾†æº–ç¢ºå®šä½
            let searchPattern;
            
            if (selector.startsWith('#')) {
                searchPattern = `id="${selector.substring(1)}"`;
            } else if (selector.startsWith('.')) {
                searchPattern = `class="[^"]*${selector.substring(1)}[^"]*"`;
            } else if (selector.includes(':contains(')) {
                const parts = selector.split(':contains("');
                const tag = parts[0];
                const text = parts[1].replace('")', '');
                searchPattern = `<${tag}[^>]*>[^<]*${text}`;
            } else {
                searchPattern = `<${selector}[^>]*>`;
            }
            
            try {
                const regex = new RegExp(searchPattern, 'i');
                const match = regex.exec(content);
                
                if (match) {
                    editor.focus();
                    editor.setSelectionRange(match.index, match.index + match[0].length);
                    
                    // æ»¾å‹•åˆ°é¸ä¸­ä½ç½®
                    const lineHeight = 16; // ä¼°è¨ˆçš„è¡Œé«˜
                    const linesBeforeMatch = content.substr(0, match.index).split('\n').length - 1;
                    editor.scrollTop = linesBeforeMatch * lineHeight;
                    
                    updateStatus(`å·²æ‰¾åˆ°ä¸¦é¸ä¸­å…ƒç´  ${selector}`);
                } else {
                    updateStatus(`ç„¡æ³•æ‰¾åˆ°å…ƒç´  ${selector} å°æ‡‰çš„ä»£ç¢¼`);
                }
            } catch (e) {
                updateStatus(`æŸ¥æ‰¾å…ƒç´ æ™‚å‡ºéŒ¯: ${e.message}`);
            }
        }

        // é©—è­‰HTML
        function validateHTML() {
            const content = document.getElementById('htmlInput').value;
            if (!content.trim()) {
                updateStatus('æ²’æœ‰å…§å®¹å¯ä¾›é©—è­‰');
                return;
            }
            
            // ç°¡å–®æª¢æŸ¥
            const errors = [];
            
            // æª¢æŸ¥åŸºæœ¬çµæ§‹
            if (!content.includes('<!DOCTYPE')) {
                errors.push('ç¼ºå°‘DOCTYPEè²æ˜');
            }
            
            if (!content.includes('<html>') && !content.includes('<html ')) {
                errors.push('ç¼ºå°‘HTMLæ¨™ç±¤');
            }
            
            if (!content.includes('<head>')) {
                errors.push('ç¼ºå°‘HEADæ¨™ç±¤');
            }
            
            if (!content.includes('<body>')) {
                errors.push('ç¼ºå°‘BODYæ¨™ç±¤');
            }
            
            // æª¢æŸ¥æ¨™ç±¤å¹³è¡¡
            const openTags = content.match(/<[a-z][a-z0-9]*(?:\s[^>]*)?>/gi) || [];
            const closeTags = content.match(/<\/[a-z][a-z0-9]*>/gi) || [];
            
            if (openTags.length - closeTags.length !== 0) {
                errors.push('æ¨™ç±¤æ•¸é‡ä¸å¹³è¡¡ï¼Œå¯èƒ½æœ‰æœªé–‰åˆçš„æ¨™ç±¤');
            }
            
            // é¡¯ç¤ºçµæœ
            if (errors.length === 0) {
                alert('HTMLé©—è­‰æˆåŠŸï¼æ²’æœ‰ç™¼ç¾æ˜é¡¯éŒ¯èª¤ã€‚');
                updateStatus('HTMLé©—è­‰é€šé');
            } else {
                alert(`HTMLé©—è­‰ç™¼ç¾ ${errors.length} å€‹å•é¡Œ:\n\n${errors.join('\n')}`);
                updateStatus(`é©—è­‰ç™¼ç¾ ${errors.length} å€‹å•é¡Œ`);
            }
        }

        // æ ¼å¼åŒ–HTML
        function formatHTML() {
            const content = document.getElementById('htmlInput').value;
            if (!content.trim()) {
                updateStatus('æ²’æœ‰å…§å®¹å¯ä¾›æ ¼å¼åŒ–');
                return;
            }
            
            try {
                // ç°¡å–®æ ¼å¼åŒ–
                let formatted = '';
                let indent = 0;
                let newLine = true;
                
                // ç‰¹æ®Šè™•ç†å­—ç¬¦
                const specialChars = ['<', '>', '\n'];
                let inTag = false;
                let inComment = false;
                let inPreTag = false;
                
                for (let i = 0; i < content.length; i++) {
                    const char = content[i];
                    
                    // è™•ç†è¨»é‡‹
                    if (i < content.length - 3 && content.substring(i, i + 4) === '<!--') {
                        inComment = true;
                        formatted += '<!--';
                        i += 3;
                        continue;
                    }
                    
                    if (inComment && i < content.length - 2 && content.substring(i, i + 3) === '-->') {
                        inComment = false;
                        formatted += '-->';
                        i += 2;
                        formatted += '\n' + ' '.repeat(indent);
                        continue;
                    }
                    
                    if (inComment) {
                        formatted += char;
                        continue;
                    }
                    
                    // è™•ç†preæ¨™ç±¤
                    if (i < content.length - 4 && content.substring(i, i + 5).toLowerCase() === '<pre>') {
                        inPreTag = true;
                    }
                    
                    if (inPreTag && i < content.length - 5 && content.substring(i, i + 6).toLowerCase() === '</pre>') {
                        inPreTag = false;
                    }
                    
                    if (inPreTag) {
                        formatted += char;
                        continue;
                    }
                    
                    // è™•ç†æ¨™ç±¤
                    if (char === '<' && !inTag) {
                        inTag = true;
                        
                        // è™•ç†é–‰åˆæ¨™ç±¤ç¸®é€²
                        if (i < content.length - 1 && content[i + 1] === '/') {
                            indent -= 2;
                            if (indent < 0) indent = 0;
                        }
                        
                        if (newLine) {
                            formatted += ' '.repeat(indent);
                            newLine = false;
                        }
                        
                        formatted += '<';
                    } else if (char === '>' && inTag) {
                        inTag = false;
                        formatted += '>';
                        
                        // è™•ç†è‡ªé–‰åˆæ¨™ç±¤ä¸å¢åŠ ç¸®é€²
                        if (i > 0 && content[i - 1] === '/') {
                            // ä¸å¢åŠ ç¸®é€²
                        } 
                        // è™•ç†é–‹å§‹æ¨™ç±¤å¢åŠ ç¸®é€²
                        else if (i > 0 && content[i - 1] !== '/') {
                            // æ‰¾åˆ°æ¨™ç±¤å
                            let j = i - 1;
                            while (j >= 0 && content[j] !== '<') j--;
                            
                            if (j >= 0) {
                                const tagContent = content.substring(j, i + 1);
                                // æ’é™¤è‡ªé–‰åˆæ¨™ç±¤å’Œç„¡å…§å®¹æ¨™ç±¤
                                if (!tagContent.match(/<(meta|link|img|br|hr|input|source)(\s|>)/i)) {
                                    indent += 2;
                                }
                            }
                        }
                        
                        formatted += '\n';
                        newLine = true;
                    } else {
                        if (newLine && !inTag && char !== '\n') {
                            formatted += ' '.repeat(indent);
                            newLine = false;
                        }
                        
                        if (char === '\n') {
                            if (!inTag) newLine = true;
                            // å¿½ç•¥åŸæ–‡ä»¶ä¸­çš„æ›è¡Œï¼Œé™¤éåœ¨æ¨™ç±¤å¤–
                            if (!inTag) formatted += '\n';
                        } else {
                            formatted += char;
                        }
                    }
                }
                
                document.getElementById('htmlInput').value = formatted;
                updatePreview();
                addToHistory('æ ¼å¼åŒ–HTML', 'ä»£ç¢¼å·²æ ¼å¼åŒ–');
                updateStatus('HTMLä»£ç¢¼å·²æ ¼å¼åŒ–');
            } catch (e) {
                alert('æ ¼å¼åŒ–éç¨‹ä¸­å‡ºéŒ¯: ' + e.message);
                updateStatus('æ ¼å¼åŒ–å¤±æ•—');
            }
        }

        // æ–‡ä»¶ä¸‹è¼‰è™•ç†
        function downloadFile() {
            const content = document.getElementById('htmlInput').value;
            const customName = document.getElementById('customName').value;
            const filename = `${customName.replace(/[^a-zA-Z0-9\u4e00-\u9fa5\-_]/g, '_')}.html`;

            const blob = new Blob([content], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            updateStatus(`å·²ä¸‹è¼‰æ–‡ä»¶: ${filename}`);
        }

        // è¤‡è£½åˆ°å‰ªè²¼æ¿
        function copyToClipboard() {
            const content = document.getElementById('htmlInput').value;
            navigator.clipboard.writeText(content)
                .then(() => {
                    updateStatus('å·²è¤‡è£½åˆ°å‰ªè²¼æ¿');
                })
                .catch(err => {
                    alert('è¤‡è£½å¤±æ•—: ' + err);
                    updateStatus('è¤‡è£½å¤±æ•—');
                });
        }

        // ä½¿ç”¨æ¨¡æ¿
        function showTemplates() {
            const templates = [
                {
                    name: 'åŸºæœ¬HTML5æ¨¡æ¿',
                    code: `<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘çš„ç¶²é </title>
    <style>
        body {
            font-family: 'å¾®è»Ÿæ­£é»‘é«”', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ç¶²é æ¨™é¡Œ</h1>
        </header>
        <main>
            <p>é€™æ˜¯ä¸€å€‹åŸºæœ¬çš„HTML5æ¨¡æ¿ã€‚</p>
        </main>
        <footer>
            <p>&copy; 2025 æˆ‘çš„ç¶²ç«™</p>
        </footer>
    </div>
</body>
</html>`
                },
                {
                    name: 'ç°¡å–®æ–‡ç« é é¢',
                    code: `<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–‡ç« æ¨™é¡Œ</title>
    <style>
        body {
            font-family: 'å¾®è»Ÿæ­£é»‘é«”', Arial, sans-serif;
            margin: 0;
            padding: 0;
            line-height: 1.8;
            color: #333;
        }
        .article-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        h1 {
            font-size: 2.2em;
            margin-bottom: 20px;
        }
        .meta {
            color: #666;
            margin-bottom: 30px;
            font-size: 0.9em;
        }
        p {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="article-container">
        <h1>æ–‡ç« æ¨™é¡Œ</h1>
        <div class="meta">
            ä½œè€…ï¼šä½œè€…åç¨± | ç™¼å¸ƒæ—¥æœŸï¼š2025å¹´3æœˆ24æ—¥
        </div>
        <article>
            <p>é€™æ˜¯æ–‡ç« çš„ç¬¬ä¸€æ®µã€‚ä½ å¯ä»¥åœ¨é€™è£¡å¯«å…¥å…§å®¹ã€‚</p>
            <p>é€™æ˜¯æ–‡ç« çš„ç¬¬äºŒæ®µã€‚ç¹¼çºŒå¯«å…¥æ›´å¤šå…§å®¹ã€‚</p>
            <h2>å°æ¨™é¡Œ</h2>
            <p>é€™æ˜¯å°æ¨™é¡Œä¸‹çš„å…§å®¹ã€‚</p>
        </article>
    </div>
</body>
</html>`
                }
            ];
            
            const templateNames = templates.map(t => t.name);
            const selectedTemplate = prompt(`è«‹é¸æ“‡ä¸€å€‹æ¨¡æ¿:\n${templateNames.map((name, index) => `${index + 1}. ${name}`).join('\n')}\n\nè¼¸å…¥ç·¨è™Ÿ:`);
            
            if (selectedTemplate && !isNaN(selectedTemplate) && selectedTemplate <= templates.length) {
                const index = parseInt(selectedTemplate) - 1;
                document.getElementById('htmlInput').value = templates[index].code;
                updatePreview();
                document.getElementById('customName').value = templates[index].name.replace(/[^a-zA-Z0-9\u4e00-\u9fa5\-_]/g, '_');
                updateStatus(`å·²è¼‰å…¥æ¨¡æ¿: ${templates[index].name}`);
            }
        }

        // åˆå§‹åŒ–ä»£ç¢¼ç›£è½å™¨
        document.getElementById('htmlInput').addEventListener('input', () => {
            clearTimeout(window.previewTimeout);
            window.previewTimeout = setTimeout(updatePreview, 500);
        });
    </script>
</body>
</html>
