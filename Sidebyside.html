<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å·¦é„°æœ‰ã€Œä½ ã€- å¿ƒä¹‹è¿·é€”</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft JhengHei', Arial, sans-serif;
        }

        body {
            background-color: #121212;
            color: #e0e0e0;
            line-height: 1.6;
            overflow-x: hidden;
            background-image: radial-gradient(circle at center, #1a1a2e 0%, #121212 70%);
        }

        .game-container {
            display: none;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
        }

        .game-title {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 10px;
            letter-spacing: 2px;
            color: rgba(255, 255, 255, 0.9);
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        .glow {
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { text-shadow: 0 0 5px #fff, 0 0 10px #fff, 0 0 15px #4a148c, 0 0 20px #4a148c; }
            to { text-shadow: 0 0 10px #fff, 0 0 20px #fff, 0 0 30px #4a148c, 0 0 40px #4a148c; }
        }

        .game-subtitle {
            text-align: center;
            font-size: 1.2rem;
            margin-bottom: 30px;
            opacity: 0.8;
        }

        .stage, .game-section {
            display: none;
            animation: fadeIn 1s ease;
        }

        .stage.active, .game-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .stage-title, .game-title h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: #9c27b0;
            border-bottom: 1px solid rgba(156, 39, 176, 0.3);
            padding-bottom: 10px;
        }

        .stage-description, .game-description {
            margin-bottom: 20px;
            font-size: 1.1rem;
            line-height: 1.6;
        }

        .story-section {
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            position: relative;
            overflow: hidden;
        }

        .story-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(74, 20, 140, 0.1) 0%, rgba(0, 0, 0, 0) 100%);
            pointer-events: none;
        }

        .story-section.objective {
            background-color: rgba(33, 150, 243, 0.1);
            border-left: 3px solid #2196F3;
        }

        .story-section.note {
            background-color: rgba(255, 152, 0, 0.1);
            border-left: 3px solid #FF9800;
            font-style: italic;
        }

        .input-section {
            margin: 20px 0;
            text-align: center;
        }

        input[type="text"], input[type="password"] {
            width: 100%;
            padding: 12px;
            border: none;
            background-color: rgba(255, 255, 255, 0.1);
            color: #fff;
            border-radius: 5px;
            margin-bottom: 10px;
            font-size: 1rem;
        }

        input[type="text"]::placeholder, input[type="password"]::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        button {
            padding: 10px 20px;
            background-color: #4a148c;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        button:hover {
            background-color: #6a1b9a;
            transform: translateY(-2px);
        }

        .error-message {
            color: #f44336;
            font-size: 0.9rem;
            margin-top: 5px;
            min-height: 1.5em;
        }

        .hint {
            font-size: 0.9rem;
            color: #aaa;
            margin-bottom: 10px;
            font-style: italic;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .progress {
            height: 100%;
            background: linear-gradient(90deg, #4a148c 0%, #9c27b0 100%);
            width: 0%;
            transition: width 1s ease;
            box-shadow: 0 0 10px rgba(156, 39, 176, 0.7);
        }

        .location-guide {
            background-color: rgba(33, 150, 243, 0.15);
            border: 1px solid rgba(33, 150, 243, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            position: relative;
        }

        .location-title {
            color: #2196F3;
            font-size: 1.2rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .location-icon {
            margin-right: 10px;
            font-size: 1.4rem;
        }

        .location-path {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
            margin-bottom: 10px;
        }

        .location-step {
            background-color: rgba(255, 255, 255, 0.1);
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .location-step:hover {
            background-color: rgba(33, 150, 243, 0.2);
        }

        .location-step.active {
            background-color: rgba(33, 150, 243, 0.3);
            font-weight: bold;
        }

        .location-arrow {
            color: #aaa;
            font-size: 0.8rem;
        }

        .location-clue {
            margin-top: 10px;
            font-style: italic;
            color: #bbb;
            font-size: 0.9rem;
        }

        .notebook {
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 5px;
            padding: 15px;
            margin: 30px auto;
            position: relative;
            box-shadow: 0 3px 15px rgba(0, 0, 0, 0.2);
            max-width: 90%;
            height: 250px;
            cursor: pointer;
            perspective: 1000px;
            transition: all 0.5s ease;
            z-index: 10;
        }

        .notebook-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.8s;
            transform-style: preserve-3d;
        }

        .notebook.flipped .notebook-inner {
            transform: rotateY(180deg);
        }

        .notebook-front, .notebook-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 5px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .notebook-front {
            background-color: #4a148c;
            align-items: center;
            padding: 20px;
        }

        .notebook-back {
            background-color: rgba(255, 255, 255, 0.05);
            transform: rotateY(180deg);
            padding: 15px;
            overflow-y: auto;
        }

        .notebook-title {
            color: #aaa;
            margin-bottom: 10px;
            font-size: 1.2rem;
            font-weight: normal;
            border-bottom: 1px dashed rgba(255, 255, 255, 0.2);
            padding-bottom: 5px;
        }

        .notebook-entry {
            margin-bottom: 10px;
            font-size: 0.95rem;
            line-height: 1.5;
            color: #ddd;
        }

        .notebook-highlight {
            color: #ce93d8;
            font-weight: bold;
        }

        .envelope-icon {
            font-size: 3rem;
            color: #fff;
        }

        .progress-map-container {
            position: relative;
            width: 100%;
            height: 150px;
            margin: 30px 0;
            overflow: hidden;
        }

        .progress-map {
            width: 100%;
            height: 100%;
        }

        .progress-path {
            stroke-dasharray: 1000;
            stroke-dashoffset: 1000;
            animation: drawPath 2s forwards ease-out;
        }

        @keyframes drawPath {
            to { stroke-dashoffset: 0; }
        }

        .progress-node {
            fill: #444;
            transition: all 0.5s ease;
            cursor: pointer;
        }

        .progress-node.current {
            fill: #9c27b0;
            filter: drop-shadow(0 0 5px rgba(156, 39, 176, 0.7));
        }

        .progress-node.completed {
            fill: #4caf50;
        }

        .progress-node.locked {
            fill: #444;
        }

        .progress-label {
            fill: #aaa;
            font-size: 0.7rem;
            text-anchor: middle;
            pointer-events: none;
        }

        .map-container {
            position: relative;
            width: 100%;
            height: 200px;
            background-color: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
            background-image: radial-gradient(circle at center, #1a1a2e 0%, #0f0f1a 100%);
        }

        .location {
            position: absolute;
            width: 30px;
            height: 30px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2;
        }

        .location::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.1);
            transform: scale(1);
            z-index: -1;
        }

        .location:hover {
            background-color: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%) scale(1.1);
        }

        .location-label {
            position: absolute;
            bottom: -20px;
            white-space: nowrap;
            font-size: 0.8rem;
            color: #aaa;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
        }

        .location.pulse::after {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            70% { transform: scale(2); opacity: 0; }
            100% { transform: scale(1); opacity: 0; }
        }

        .hidden-clue {
            position: absolute;
            visibility: hidden;
            opacity: 0;
        }

        .community-map {
            width: 100%;
            height: 250px;
            background-color: #1a1a2e;
            border-radius: 10px;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }

        .community-building {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .community-building:hover {
            filter: brightness(1.3);
        }

        .community-label {
            fill: white;
            font-size: 0.8rem;
            text-anchor: middle;
            pointer-events: none;
        }

        .treasure-box {
            width: 200px;
            height: 150px;
            background-color: #3e2723;
            border-radius: 10px;
            margin: 20px auto;
            position: relative;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            overflow: hidden;
        }

        .treasure-box::before {
            content: '';
            position: absolute;
            width: 80%;
            height: 10px;
            background-color: #5d4037;
            top: 40px;
            left: 10%;
            border-radius: 5px;
        }

        .treasure-box::after {
            content: '';
            position: absolute;
            width: 40px;
            height: 20px;
            background-color: #fbdc05;
            top: 60px;
            left: calc(50% - 20px);
            border-radius: 5px;
            box-shadow: 0 0 10px #fbdc05;
            transition: all 0.3s ease;
        }

        .treasure-box:hover {
            transform: scale(1.05);
        }

        .treasure-box.open {
            background-color: #4e342e;
        }

        .treasure-box.open::before {
            animation: openLid 1s forwards;
        }

        @keyframes openLid {
            0% { transform: rotateX(0deg); }
            100% { transform: rotateX(-90deg); opacity: 0; }
        }

        .treasure-box.open::after {
            animation: glowKey 1s infinite alternate;
        }

        @keyframes glowKey {
            from { box-shadow: 0 0 10px #fbdc05; }
            to { box-shadow: 0 0 20px #fbdc05, 0 0 40px #fbdc05; }
        }

        .treasure-box.shake {
            animation: shake 0.5s ease;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-10px); }
            40%, 80% { transform: translateX(10px); }
        }

        .phone {
            width: 180px;
            height: 300px;
            background-color: #000;
            border-radius: 20px;
            margin: 20px auto;
            position: relative;
            padding: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
        }

        .phone-screen {
            width: 100%;
            height: 85%;
            background-color: #121212;
            border-radius: 10px;
            overflow-y: auto;
            padding: 10px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .phone-button {
            width: 40px;
            height: 40px;
            background-color: #333;
            border-radius: 50%;
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .phone-button:hover {
            background-color: #444;
        }

        .message {
            padding: 8px 12px;
            border-radius: 15px;
            max-width: 80%;
            word-break: break-word;
            font-size: 0.9rem;
            animation: messageIn 0.3s ease;
        }

        @keyframes messageIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .message.incoming {
            background-color: #263238;
            align-self: flex-start;
            border-bottom-left-radius: 5px;
        }

        .message.outgoing {
            background-color: #4a148c;
            align-self: flex-end;
            border-bottom-right-radius: 5px;
        }

        .inventory {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
            justify-content: center;
        }

        .food-item {
            width: 80px;
            padding: 10px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .food-item:hover {
            transform: translateY(-5px);
            background-color: rgba(255, 255, 255, 0.15);
        }

        .food-img {
            font-size: 2rem;
            margin-bottom: 5px;
        }

        .effect-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
            overflow: hidden;
        }

        .sparkle {
            position: absolute;
            width: 8px;
            height: 8px;
            background-color: #fff;
            border-radius: 50%;
            box-shadow: 0 0 10px #fff, 0 0 20px #fff;
            animation: fadeOut 1s forwards;
        }

        @keyframes fadeOut {
            to { opacity: 0; transform: scale(0); }
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            opacity: 1;
            animation: fall 3s forwards linear;
        }

        @keyframes fall {
            to { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }

        .achievements {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin: 15px 0;
        }

        .achievement {
            width: 80px;
            height: 80px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            transition: all 0.3s ease;
            font-size: 2rem;
            opacity: 0.3;
        }

        .achievement.unlocked {
            background-color: rgba(255, 215, 0, 0.2);
            box-shadow: 0 0 15px gold;
            opacity: 1;
        }

        .achievement-label {
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
            font-size: 0.8rem;
            color: #aaa;
        }

        .achievement.unlocked .achievement-label {
            color: gold;
        }

        .money-collection {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
            justify-content: center;
        }

        .money-item {
            width: 80px;
            height: 80px;
            background-color: #fbdc05;
            border-radius: 50%;
            color: #000;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 10px rgba(251, 220, 5, 0.5);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .money-item:hover {
            transform: translateY(-5px) rotate(10deg);
            box-shadow: 0 0 15px rgba(251, 220, 5, 0.7);
        }

        .money-value {
            font-size: 1.5rem;
        }

        .eerie-effect {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, transparent 0%, rgba(0, 0, 0, 0.5) 100%);
            pointer-events: none;
            z-index: 0;
        }

        .void-circle {
            position: absolute;
            border-radius: 50%;
            border: 2px solid rgba(255, 255, 255, 0.1);
            background-color: rgba(0, 0, 0, 0.2);
            transform: translate(-50%, -50%);
            animation: pulse-void 4s infinite alternate;
        }

        @keyframes pulse-void {
            0% { box-shadow: 0 0 10px rgba(74, 20, 140, 0.3); }
            100% { box-shadow: 0 0 30px rgba(74, 20, 140, 0.7); }
        }

        .void-heart {
            position: relative;
            width: 100px;
            height: 100px;
            margin: 20px auto;
        }

        .void-heart::before, .void-heart::after {
            content: '';
            position: absolute;
            width: 50px;
            height: 80px;
            border: 2px solid #4a148c;
            border-radius: 50px 50px 0 0;
            background-color: transparent;
        }

        .void-heart::before {
            transform: rotate(-45deg);
            left: 20px;
        }

        .void-heart::after {
            transform: rotate(45deg);
            right: 20px;
        }

        .void-heart.filling::before, .void-heart.filling::after {
            background-color: rgba(74, 20, 140, 0.3);
            animation: fill-heart 2s forwards;
        }

        @keyframes fill-heart {
            0% { background-color: rgba(74, 20, 140, 0); }
            100% { background-color: rgba(74, 20, 140, 0.7); }
        }

        .fog {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiPjxkZWZzPjxmaWx0ZXIgaWQ9ImZvZyI+PGZlVHVyYnVsZW5jZSB0eXBlPSJmcmFjdGFsTm9pc2UiIGJhc2VGcmVxdWVuY3k9IjAuMDEiIG51bU9jdGF2ZXM9IjUiIHN0aXRjaFRpbGVzPSJzdGl0Y2giIHJlc3VsdD0ibm9pc2UiIC8+PGZlQ29sb3JNYXRyaXggaW49Im5vaXNlIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMSAwIDAgMCAwIDAgMSAwIDAgMCAwIDAgMSAwIDAgMCAwIDAgMC4xIDAiIHJlc3VsdD0iZm9nIiAvPjwvZmlsdGVyPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ0cmFuc3BhcmVudCIgZmlsdGVyPSJ1cmwoI2ZvZykiIC8+PC9zdmc+');
            opacity: 0.3;
            pointer-events: none;
            z-index: 1;
        }

        .dialogue-container {
            position: relative;
            padding: 10px 15px;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 8px;
            font-size: 1rem;
            margin: 15px 0;
            text-align: left;
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            transition: all 0.5s ease;
        }

        .dialogue-container.show {
            max-height: 300px;
            opacity: 1;
            margin: 15px 0;
        }

        .dialogue-text {
            margin: 5px 0;
            color: #fff;
        }

        .dialogue-name {
            color: #9c27b0;
            font-weight: bold;
            margin-right: 10px;
        }

        .typing-effect {
            overflow: hidden;
            white-space: nowrap;
            border-right: 2px solid #fff;
            animation: typing 3s steps(40, end), blink-caret 0.75s step-end infinite;
        }

        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }

        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: #fff }
        }

        .cutscene {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.85);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            opacity: 0;
            visibility: hidden;
            transition: all 0.5s ease;
        }

        .cutscene.active {
            opacity: 1;
            visibility: visible;
        }

        .cutscene-content {
            max-width: 800px;
            text-align: center;
        }

        .cutscene-title {
            font-size: 2rem;
            margin-bottom: 20px;
            color: #fff;
            text-shadow: 0 0 10px rgba(156, 39, 176, 0.7);
        }

        .cutscene-text {
            font-size: 1.2rem;
            line-height: 1.6;
            margin-bottom: 30px;
            color: #eee;
        }

        .cutscene-continue {
            font-size: 1rem;
            color: #aaa;
            margin-top: 30px;
            animation: pulse 1s infinite alternate;
        }

        .envelope-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 1500;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease;
        }

        .envelope-container.active {
            opacity: 1;
            visibility: visible;
        }

        .envelope-svg {
            width: 300px;
            height: 200px;
            position: relative;
            perspective: 1000px;
        }

        .envelope-body {
            fill: #4a148c;
            stroke: #6a1b9a;
            stroke-width: 2;
            filter: drop-shadow(0 5px 15px rgba(0, 0, 0, 0.5));
        }

        .envelope-flap {
            fill: #6a1b9a;
            transform-origin: center top;
            transition: transform 2s ease;
        }

        .envelope-container.opening .envelope-flap {
            transform: rotateX(180deg);
        }

        .envelope-letter {
            position: absolute;
            width: 260px;
            height: 160px;
            background: white;
            border-radius: 5px;
            top: 20px;
            left: 20px;
            padding: 15px;
            transform: translateY(0);
            transition: transform 1s ease;
            z-index: -1;
            color: #333;
            font-size: 0.9rem;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .envelope-container.opening .envelope-letter {
            transform: translateY(-100px);
            z-index: 1;
        }

        .letter-title {
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: #4a148c;
            font-weight: bold;
        }

        .letter-content {
            text-align: center;
            line-height: 1.4;
        }

        .envelope-glow {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            background: radial-gradient(circle at center, rgba(156, 39, 176, 0.3) 0%, transparent 70%);
            filter: blur(10px);
            animation: envelope-pulse 2s infinite alternate;
        }

        @keyframes envelope-pulse {
            from { opacity: 0.5; }
            to { opacity: 1; }
        }

        .key-effect {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            opacity: 0;
            transition: opacity 0.5s ease, transform 1s ease;
        }

        .key-effect.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1.5);
        }

        .start-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #121212;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            background-image: radial-gradient(circle at center, #1a1a2e 0%, #121212 70%);
        }

        .start-screen .game-title {
            font-size: 3rem;
            margin-bottom: 20px;
        }

        .start-screen .game-subtitle {
            font-size: 1.5rem;
            margin-bottom: 30px;
        }

        .start-screen button {
            padding: 15px 30px;
            font-size: 1.2rem;
            background-color: #4a148c;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .start-screen button:hover {
            background-color: #6a1b9a;
            transform: scale(1.1);
        }

        .hint-card {
            position: relative;
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            transition: all 0.5s ease;
        }

        .hint-card.show {
            max-height: 300px;
            opacity: 1;
            margin: 15px 0;
        }

        .hint-btn {
            background-color: rgba(33, 150, 243, 0.2);
            color: #2196F3;
            border: 1px solid #2196F3;
            margin-top: 5px;
        }

        .hint-btn:hover {
            background-color: rgba(33, 150, 243, 0.3);
        }

        /* Code2 æ¨£å¼æ•´åˆ */
        :root {
            --main-bg-color: #0a0a0a;
            --text-color: #e0e0e0;
            --accent-color: #ff3030;
            --secondary-color: #303030;
            --success-color: #30b030;
            --highlight-color: #ff9900;
        }

        .game-section {
            background-color: rgba(20, 20, 20, 0.8);
            border: 1px solid var(--accent-color);
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 0 20px rgba(255, 48, 48, 0.2);
            position: relative;
            overflow: hidden;
        }

        .location-tag {
            background-color: var(--accent-color);
            color: var(--main-bg-color);
            padding: 5px 10px;
            border-radius: 5px;
            margin-right: 10px;
            font-weight: bold;
        }

        .game-content {
            background-color: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        .control-panel {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--secondary-color);
        }

        .control-button {
            background-color: var(--secondary-color);
            color: var(--text-color);
            border: none;
            padding: 10px 20px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            border-radius: 5px;
        }

        .control-button:hover {
            background-color: var(--highlight-color);
        }

        .success-message {
            color: var(--success-color);
            font-weight: bold;
            margin-top: 15px;
            padding: 10px;
            border: 1px solid var(--success-color);
            border-radius: 5px;
            display: none;
        }

        /* å¿ƒé€£å¿ƒå‚³å¯†ç¢¼ */
        .circle-game {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .circle-animation {
            width: 300px;
            height: 300px;
            position: relative;
            margin: 20px 0;
        }

        .player {
            width: 40px;
            height: 40px;
            background-color: var(--secondary-color);
            border: 2px solid var(--text-color);
            border-radius: 50%;
            position: absolute;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .player.active {
            background-color: var(--highlight-color);
            box-shadow: 0 0 15px var(--highlight-color);
        }

        .circle-line {
            position: absolute;
            height: 2px;
            background-color: var(--text-color);
            transform-origin: left center;
        }

        .password-display {
            font-size: 1.5em;
            margin: 20px 0;
            letter-spacing: 10px;
        }

        .attempts-counter {
            font-size: 1.2em;
            margin: 10px 0;
        }

        /* å·´å£«ç·šé…å° */
        .bus-matching {
            display: flex;
            flex-direction: column;
        }

        .bus-question {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding: 10px;
            background-color: rgba(50, 50, 50, 0.5);
            border-radius: 5px;
        }

        .bus-question input {
            background-color: var(--secondary-color);
            color: var(--text-color);
            border: 1px solid var(--text-color);
            padding: 8px;
            margin: 0 10px;
            width: 100px;
            border-radius: 3px;
        }

        .check-result {
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .check-icon {
            color: var(--success-color);
            font-size: 1.5em;
            display: none;
        }

        /* é»˜å¥‘å¤§è€ƒé©— */
        .action-challenge {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .action-display {
            font-size: 2em;
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 30px 0;
            padding: 20px;
            width: 100%;
            background-color: rgba(50, 50, 50, 0.5);
            border-radius: 10px;
            text-align: center;
        }

        .countdown {
            font-size: 4em;
            margin: 20px 0;
            color: var(--highlight-color);
        }

        .success-counter {
            font-size: 1.2em;
            margin-top: 20px;
        }

        /* é–‹å£ä¸­ */
        .number-guessing {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .number-range {
            font-size: 1.5em;
            margin: 20px 0;
        }

        .guess-input {
            display: flex;
            align-items: center;
            margin: 20px 0;
        }

        .guess-input input {
            background-color: var(--secondary-color);
            color: var(--text-color);
            border: 1px solid var(--text-color);
            padding: 10px;
            width: 100px;
            font-size: 1.2em;
            border-radius: 5px;
            margin-right: 10px;
            text-align: center;
        }

        .guess-button {
            background-color: var(--highlight-color);
            color: var(--main-bg-color);
            border: none;
            padding: 10px 20px;
            font-size: 1.2em;
            cursor: pointer;
            border-radius: 5px;
        }

        .clues-container {
            margin-top: 30px;
            width: 100%;
        }

        .clue {
            padding: 15px;
            margin: 10px 0;
            background-color: rgba(50, 50, 50, 0.5);
            border-radius: 5px;
            opacity: 0.3;
        }

        .clue.revealed {
            opacity: 1;
            border-left: 5px solid var(--success-color);
        }

        /* å­—æ¯æ‹¼å­—æŒ‘æˆ° */
        .letter-challenge {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .people-counter {
            display: flex;
            align-items: center;
            margin: 20px 0;
        }

        .counter-button {
            background-color: var(--secondary-color);
            color: var(--text-color);
            border: none;
            width: 40px;
            height: 40px;
            font-size: 1.5em;
            cursor: pointer;
            border-radius: 5px;
        }

        .people-count {
            font-size: 1.5em;
            margin: 0 20px;
            width: 40px;
            text-align: center;
        }

        .word-display {
            font-size: 4em;
            letter-spacing: 15px;
            margin: 30px 0;
            color: var(--highlight-color);
            text-shadow: 0 0 10px rgba(255, 153, 0, 0.5);
        }

        /* å¤§é›»è¦–è§£è¬ */
        .tv-game {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .tv-screen {
            width: 80%;
            height: 200px;
            background-color: rgba(0, 0, 0, 0.7);
            border: 3px solid var(--secondary-color);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
            font-size: 2.5em;
            padding: 20px;
            text-align: center;
        }

        .tv-controls {
            display: flex;
            gap: 10px;
        }

        .progress-display {
            margin-top: 20px;
            font-size: 1.2em;
        }

        /* ç‰¹æ•ˆ */
        .glitch {
            position: relative;
        }

        .glitch::before, .glitch::after {
            content: attr(data-text);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .glitch::before {
            left: 2px;
            text-shadow: -1px 0 red;
            clip: rect(0, 900px, 0, 0);
            animation: glitch-anim-1 2s infinite linear alternate-reverse;
        }

        .glitch::after {
            left: -2px;
            text-shadow: -1px 0 blue;
            clip: rect(0, 900px, 0, 0);
            animation: glitch-anim-2 2s infinite linear alternate-reverse;
        }

        @keyframes glitch-anim-1 {
            0% { clip: rect(20px, 9999px, 21px, 0); }
            25% { clip: rect(12px, 9999px, 59px, 0); }
            50% { clip: rect(62px, 9999px, 78px, 0); }
            75% { clip: rect(34px, 9999px, 94px, 0); }
            100% { clip: rect(53px, 9999px, 40px, 0); }
        }

        @keyframes glitch-anim-2 {
            0% { clip: rect(65px, 9999px, 119px, 0); }
            25% { clip: rect(31px, 9999px, 65px, 0); }
            50% { clip: rect(9px, 9999px, 85px, 0); }
            75% { clip: rect(25px, 9999px, 68px, 0); }
            100% { clip: rect(20px, 9999px, 30px, 0); }
        }

        .flicker {
            animation: flicker 2s infinite alternate;
        }

        @keyframes flicker {
            0%, 18%, 22%, 25%, 53%, 57%, 100% { opacity: 1; }
            20%, 24%, 55% { opacity: 0.5; }
        }

        .scan-line {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, transparent, rgba(255, 255, 255, 0.03) 50%, transparent);
            animation: scan 8s linear infinite;
            pointer-events: none;
            z-index: 10;
        }

        @keyframes scan {
            from { transform: translateY(-100%); }
            to { transform: translateY(100%); }
        }

        /* æŒ‘æˆ°æŒ‰éˆ• */
        .challenge-btn {
            background-color: #ff3030;
            color: white;
            padding: 12px 24px;
            font-size: 1.1rem;
        }

        .challenge-btn:hover {
            background-color: #ff5050;
            transform: translateY(-3px);
        }
    </style>
</head>
<body>
    <div class="eerie-effect"></div>
    <div class="fog"></div>
    <div class="scan-line"></div>

    <div class="start-screen">
        <h1 class="game-title glow">å·¦é„°æœ‰ã€Œä½ ã€</h1>
        <p class="game-subtitle">å°‹æ‰¾å¿ƒä¹‹é–åŒ™</p>
        <button id="gameStartBtn">Game Start</button>
    </div>

    <div class="game-container">
        <h1 class="game-title glow">å·¦é„°æœ‰ã€Œä½ ã€</h1>
        <p class="game-subtitle">å°‹æ‰¾å¿ƒä¹‹é–åŒ™</p>

        <div class="progress-bar">
            <div class="progress" id="progressBar"></div>
        </div>

        <!-- ä¿¡å°å‹•ç•«å®¹å™¨ -->
        <div class="envelope-container" id="envelope-container">
            <div class="envelope-glow"></div>
            <svg class="envelope-svg" viewBox="0 0 300 200">
                <rect class="envelope-body" x="20" y="50" width="260" height="150" rx="5"/>
                <path class="envelope-flap" d="M20,50 L150,120 L280,50 L280,50 L150,20 L20,50 Z"/>
                <path class="envelope-fold" d="M20,50 L150,120 L20,200" fill="none" stroke="#6a1b9a" stroke-width="1" opacity="0.5"/>
                <path class="envelope-fold" d="M280,50 L150,120 L280,200" fill="none" stroke="#6a1b9a" stroke-width="1" opacity="0.5"/>
            </svg>
            <div class="envelope-letter" id="envelope-letter">
                <h3 class="letter-title" id="letter-title">å¿ƒä¹‹è¿·é€”</h3>
                <p class="letter-content" id="letter-content">ä½ é†’ä¾†æ–¼ä¸€å€‹ç†Ÿæ‚‰åˆé™Œç”Ÿçš„ç©ºé–“ï¼Œé€™è£¡åƒæ˜¯ç¤¾å€çš„å€’å½±ï¼Œå»ç± ç½©è‘—è©­ç•°çš„æ°›åœã€‚æ›´å¥‡æ€ªçš„æ˜¯ï¼Œä½ æ„Ÿè¦ºä¸åˆ°ä»»ä½•æƒ…æ„Ÿï¼Œå¦‚åŒå¿ƒæ˜¯ç©ºæ´çš„ã€‚</p>
            </div>
        </div>

        <!-- éå ´å‹•ç•«å®¹å™¨ -->
        <div class="cutscene" id="cutscene">
            <div class="cutscene-content">
                <h2 class="cutscene-title" id="cutscene-title"></h2>
                <p class="cutscene-text" id="cutscene-text"></p>
                <p class="cutscene-continue">é»æ“Šä»»æ„è™•ç¹¼çºŒ...</p>
            </div>
        </div>

        <!-- é€²ç¨‹åœ°åœ– -->
        <div class="progress-map-container">
            <svg class="progress-map" viewBox="0 0 800 100" preserveAspectRatio="xMidYMid meet">
                <path class="progress-path" d="M50,50 C150,20 250,80 350,50 C450,20 550,80 650,50 S750,20 750,50" 
                    stroke="#444" stroke-width="10" fill="none" stroke-linecap="round"/>
                <circle class="progress-node current" id="node0" cx="50" cy="50" r="10"/>
                <text class="progress-label" x="50" y="75">1. å–„åŒ¯(èµ·é»)</text>
                <circle class="progress-node locked" id="node1" cx="190" cy="30" r="10"/>
                <text class="progress-label" x="190" y="15">2. ç†Ÿæ‚‰çš„å·´å£«ç·š</text>
                <circle class="progress-node locked" id="node2" cx="350" cy="50" r="10"/>
                <text class="progress-label" x="350" y="75">3. é€Ÿé£Ÿé»</text>
                <circle class="progress-node locked" id="node3" cx="480" cy="30" r="10"/>
                <text class="progress-label" x="480" y="15">4. ç´…è±é“ä¹‹åœ°</text>
                <circle class="progress-node locked" id="node4" cx="580" cy="70" r="10"/>
                <text class="progress-label" x="580" y="95">5. é£Ÿå¾—æ˜¯ç¦</text>
                <circle class="progress-node locked" id="node5" cx="680" cy="40" r="10"/>
                <text class="progress-label" x="680" y="25">6. ç”Ÿæ´»æ•‘æ˜Ÿ</text>
                <circle class="progress-node locked" id="node6" cx="750" cy="50" r="10"/>
                <text class="progress-label" x="750" y="75">7. ç”Ÿèˆ‡ç†Ÿä¹‹åœ°</text>
            </svg>
        </div>

        <!-- éŠæˆ²ä»‹ç´¹ -->
        <div class="stage active" id="intro">
            <h2 class="stage-title">ç•°ç©ºé–“----ç†Ÿæ‚‰çš„é™Œç”Ÿåœ°(èµ·é»)</h2>
            <div class="notebook" id="notebook-intro">
                <div class="notebook-inner">
                    <div class="notebook-front">
                        <div class="envelope-icon">âœ‰ï¸</div>
                    </div>
                    <div class="notebook-back">
                        <h3 class="notebook-title">è¿·é€”ç­†è¨˜</h3>
                        <p class="notebook-entry">æˆ‘ä¼¼ä¹è¢«å›°åœ¨ä¸€å€‹ç†Ÿæ‚‰åˆé™Œç”Ÿçš„ç©ºé–“ï¼Œç¤¾å€çš„è¼ªå»“ä¾ç¨€å¯è¦‹ï¼Œä½†ä¸€åˆ‡éƒ½ç± ç½©è‘—è©­ç•°çš„æ°›åœã€‚æœ€å¥‡æ€ªçš„æ˜¯ï¼Œæˆ‘æ„Ÿè¦ºä¸åˆ°ä»»ä½•æƒ…æ„Ÿï¼Œå¦‚åŒå¿ƒæ˜¯ç©ºæ´çš„ã€‚</p>
                        <p class="notebook-entry">ç¥ç§˜è²éŸ³æåˆ°äº†<span class="notebook-highlight">å¿ƒä¹‹é–åŒ™</span>ï¼Œä¼¼ä¹åªæœ‰æ‰¾åˆ°å®ƒï¼Œæˆ‘å’Œå…¶ä»–å±…æ°‘æ‰èƒ½æ¢å¾©ã€‚æˆ‘éœ€è¦è·Ÿéš¨<span class="notebook-highlight">è¨˜æ†¶ç¢ç‰‡</span>é–‹å§‹é€™æ®µå¥‡ç•°çš„æ—…ç¨‹ã€‚</p>
                    </div>
                </div>
            </div>
            <div class="dialogue-container show" id="intro-dialogue">
                <p class="dialogue-text typing-effect"><span class="dialogue-name">ç¥ç§˜è²éŸ³:</span>æ­¡è¿ä¾†åˆ°ã€å¿ƒä¹‹è¿·é€”ã€ï¼Œä¸åŒçš„ä»»å‹™ç­‰è‘—ä½ å€‘...ã€‚</p>
            </div>
            <div class="story-section">

                <p>ï¼Šæ•…äº‹åŠ‡æƒ…ï¼Š</p>
                <p>ä½ é†’ä¾†ç™¼ç¾è‡ªå·±èº«è™•ä¸€å€‹ç†Ÿæ‚‰åˆé™Œç”Ÿçš„ç©ºé–“ï¼Œå½·å½¿æ˜¯ä½ æ›¾ç¶“ç”Ÿæ´»çš„ç¤¾å€ï¼Œå»åˆå¾®å¦™åœ°ä¸åŒã€‚å‘¨åœçš„ä¸€åˆ‡éƒ½ç± ç½©è‘—ä¸€å±¤è©­ç•°çš„æ°›åœï¼Œè€Œæ›´å¥‡æ€ªçš„æ˜¯ï¼Œä½ æ„Ÿè¦ºè‡ªå·±çš„å¿ƒæ˜¯ç©ºæ´çš„ã€‚</p>
            </div>
            <div class="void-heart" id="introHeart"></div>
            <div class="story-section objective">
                <p><strong>è¬ä¹‹è²éŸ³ï¼š</strong>å¸¶é½Šè¡Œæï¼Œé¦¬ä¸Šå‡ºç™¼å°‹æ‰¾ã€Œå¿ƒä¹‹é–åŒ™ã€ã€‚</p>
            </div>
            <div class="location-guide">
                <h3 class="location-title"><span class="location-icon">ğŸ“</span>ç•¶å‰ä½ç½®</h3>
                <div class="location-path">
                    <div class="location-step active">å–„åŒ¯</div>
                </div>
                <p class="location-clue">å¯†ç¢¼éœ€è¦é€éå®Œæˆä»»å‹™å¾Œç²å¾—ã€‚</p>
            </div>
            <div class="map-container">
                <div class="location" style="top: 30%; left: 25%">
                    <span class="location-label">å·´å£«ç«™</span>
                </div>
                <div class="location" style="top: 50%; left: 60%">
                    <span class="location-label">åœ°éµç«™</span>
                </div>
                <div class="location" style="top: 70%; left: 40%">
                    <span class="location-label">å°å·´ç«™</span>
                </div>
                <div class="void-circle" style="top: 30%; left: 25%; width: 40px; height: 40px;"></div>
                <div class="hidden-clue">é›»è©±å¯†ç¢¼è—åœ¨æ•¸å­—ï¼š999</div>
            </div>
            <div class="input-section">
                <button id="startBtn">å‰å¾€ç†Ÿæ‚‰çš„å·´å£«ç·š</button>
            </div>
        </div>

        <!-- ç¬¬ä¸€é—œï¼šç†Ÿæ‚‰çš„å·´å£«ç·š -->
        <div class="stage" id="stage1">
            <h2 class="stage-title">ç¬¬ä¸€é—œï¼šå‡ºè¡Œæ˜“ (å·´å£«ç·šé…å°)</h2>
            <div class="story-section">
                <p>ï¼Šæ•…äº‹åŠ‡æƒ…ï¼Š</p>
                <p>ä½ ä¾†åˆ°ç¤¾å€çš„ç†Ÿæ‚‰çš„å·´å£«ç·šï¼Œå‘¨åœé£„æ•£è‘—æ¨¡ç³Šçš„æ•¸å­—ç¢ç‰‡ã€‚é€™äº›ç¢ç‰‡ä¼¼ä¹çµ„æˆäº†æŸå€‹ç‰¹æ®Šçš„å¯†ç¢¼ã€‚</p>
                <p>ã€Œå‘¢çµ„å¯†ç¢¼ä¿‚å’©?ã€ä½ è‡ªè¨€è‡ªèªåœ°æ€è€ƒè‘—ã€‚</p>
                <p>ã€Œé€™äº›æ•¸å­—ä¼¼ä¹åœ¨å·´å£«ç«™æœ‰é—œï¼Œéœ€è¦å®Œæˆä»»å‹™æ‰¾åˆ°å¯†ç¢¼ï¼Ÿã€</p>
            </div>
            <div class="dialogue-container show" id="stage1-dialogue">
                <p class="dialogue-text"><span class="dialogue-name">çªç ´æ–¹æ³•:</span>åƒè€ƒé—œå¡éŠæˆ²å¡ç‰‡</p>
            </div>
            <div class="location-guide">
                <h3 class="location-title"><span class="location-icon">ğŸ“</span>ç•¶å‰ä½ç½®</h3>
                <div class="location-path">
                    <div class="location-step">å–„åŒ¯</div>
                    <span class="location-arrow">â†’</span>
                    <div class="location-step active">ç†Ÿæ‚‰çš„å·´å£«ç·š</div>
                </div>
                <p class="location-clue">å¯†ç¢¼éœ€è¦é€éå®Œæˆä»»å‹™å¾Œç²å¾—ã€‚</p>
            </div>
            <div class="story-section objective">
                <p><strong>ç›®æ¨™ï¼š</strong>ä½¿ç”¨è¨˜æ†¶èˆ‡ç§‘æŠ€å¹«åŠ©ä½ å°‹æ‰¾ã€‚</p>
            </div>
            <div class="map-container">
                <div class="location" style="top: 30%; left: 25%">
                    <span class="location-label">å·´å£«ç«™</span>
                </div>
                <div class="location" style="top: 50%; left: 60%">
                    <span class="location-label">åœ°éµç«™</span>
                </div>
                <div class="location" style="top: 70%; left: 40%">
                    <span class="location-label">å°å·´ç«™</span>
                </div>
                <div class="void-circle" style="top: 30%; left: 25%; width: 40px; height: 40px;"></div>
                <div class="hidden-clue">é›»è©±å¯†ç¢¼è—åœ¨æ•¸å­—ï¼š999</div>
            </div>
            <div class="input-section">
                <p class="hint">æç¤ºï¼šå¯ä»¥ä½¿ç”¨é›»è©±</p>
                <input type="text" id="stage1Input" placeholder="è¼¸å…¥å¯†ç¢¼...">
                <button id="stage1Btn">ç¢ºèª</button>
                <p class="error-message" id="stage1Error"></p>
                <button class="challenge-btn" id="challenge1Btn" style="display: none;">é€²å…¥æŒ‘æˆ°ï¼šå·´å£«ç·šé…å°</button>
            </div>
            <div class="key-effect" style="display: none;">
                <svg width="50" height="50" viewBox="0 0 50 50">
                    <path d="M10 10 L20 20 M20 10 L10 20" stroke="#fbdc05" stroke-width="2"/>
                </svg>
            </div>
            <div class="hint-card" id="hint1">
                <p>ä½ ç²å¾—ã€æ‰‹æ©Ÿé€šè¨Šã€‘åŠŸèƒ½ï¼Œä¸¦è«‹å‰å¾€ä¸‹ä¸€å€‹ç›®çš„åœ°ï¼šé¤å»³!!</p>
            </div>
            <button class="hint-btn" id="showHint1">ä¸‹ä¸€ç«™åœ°é»</button>
        </div>

        <!-- ç¬¬äºŒé—œï¼šé¤å»³ -->
        <div class="stage" id="stage2">
            <h2 class="stage-title">ç¬¬äºŒé—œï¼šç†Ÿæ‚‰çš„äºº (å­—æ¯æ‹¼å­—æŒ‘æˆ°)</h2>
            <div class="story-section">
                <p>ï¼Šæ•…äº‹åŠ‡æƒ…ï¼Š</p>
                <p>ç•¶ä½ ä¾†åˆ°ä¸€å®¶é¤å»³ï¼Œè«‹å³åˆ»å®Œæˆä»»å‹™ã€‚</p>
                <p>ã€Œå””é€šè¦æ‰“æ¯”é›»è©±ä¸­æ—¢äººå•ä½¢ä¿‚é‚Šå€‹?ã€ä½ å¿ƒæƒ³ï¼Œé€™ä¼¼ä¹æ˜¯å”¯ä¸€çš„è¾¦æ³•äº†ã€‚</p>
            </div>
            <div class="dialogue-container show" id="stage2-dialogue">
                <p class="dialogue-text"><span class="dialogue-name">çªç ´æ–¹æ³•:</span>åƒè€ƒé—œå¡éŠæˆ²å¡ç‰‡</p>
            </div>
            <div class="location-guide">
                <h3 class="location-title"><span class="location-icon">ğŸ“</span>ç•¶å‰ä½ç½®</h3>
                <div class="location-path">
                    <div class="location-step">å–„åŒ¯</div>
                    <span class="location-arrow">â†’</span>
                    <div class="location-step">ç†Ÿæ‚‰çš„å·´å£«ç·š</div>
                    <span class="location-arrow">â†’</span>
                    <div class="location-step active">é¤å»³</div>
                </div>
                <p class="location-clue">å¯†ç¢¼éœ€è¦é€éå®Œæˆä»»å‹™å¾Œç²å¾—ã€‚</p>
            </div>
            <div class="story-section objective">
                <p><strong>ç›®æ¨™ï¼š</strong>åˆ©ç”¨èº«é«”å¸¶å‡ºè¨Šæ¯ã€‚</p>
            </div>
            <div class="phone">
                <div class="phone-screen" id="phoneScreen"></div>
                <div class="phone-button" id="phoneButton"></div>
            </div>
            <div class="story-section note">
                <p>è™Ÿç¢¼å·²ç¶“è¼¸å…¥åœ¨æ’¥è™Ÿä»‹é¢ä¸Šã€‚ç¾åœ¨ä½ éœ€è¦è©¢å•æ¥é›»è©±çš„äººæ˜¯èª°ï¼Œç›´æ¥è¼¸å…¥ç­”æ¡ˆã€‚</p>
            </div>
            <div class="input-section">
                <p class="hint">æç¤ºï¼šå‘æ¥é›»è©±çš„äººè©¢å•ä»–çš„èº«ä»½</p>
                <input type="text" id="stage2Input" placeholder="è¼¸å…¥å¯†ç¢¼...">
                <button id="stage2Btn">ç™¼é€</button>
                <p class="error-message" id="stage2Error"></p>
                <button class="challenge-btn" id="challenge2Btn" style="display: none;">é€²å…¥æŒ‘æˆ°ï¼šå­—æ¯æ‹¼å­—æŒ‘æˆ°</button>
            </div>
            <div class="key-effect" style="display: none;">
                <svg width="50" height="50" viewBox="0 0 50 50">
                    <path d="M10 10 L20 20 M20 10 L10 20" stroke="#fbdc05" stroke-width="2"/>
                </svg>
            </div>
            <div class="hint-card" id="hint2">
                <p>ä½ ç²å¾—ã€é›»è©±è™Ÿç¢¼ã€‘åŠŸèƒ½ï¼Œä¸¦è«‹å‰å¾€ä¸‹ä¸€å€‹ç›®çš„åœ°ï¼šç´…è±é“ä¼‘æ†©è™•!!</p>
            </div>
            <button class="hint-btn" id="showHint2">ä¸‹ä¸€ç«™åœ°é»</button>
        </div>

        <!-- ç¬¬ä¸‰é—œï¼šç´…è±é“ -->
        <div class="stage" id="stage3">
            <h2 class="stage-title">ç¬¬ä¸‰é—œï¼šä¼‘é¤Šç”Ÿæ¯ (å¿ƒé€£å¿ƒå‚³å¯†ç¢¼)</h2>
            <div class="story-section">
                <p>ï¼Šæ•…äº‹åŠ‡æƒ…ï¼Š</p>
                <p>é€šéèˆ‡é›»è©±ä¸­äººçš„äº¤æµï¼Œä½ è¢«å¼•å°åˆ°ç´…è±é“ï¼Œé€™è£¡æœ‰è¨±å¤šæ´»å‹•å’Œä¼‘æ†©ç©ºé–“ã€‚</p>
                <p>ã€Œå“ªè£¡æœ‰ä¼‘æ†©è™•ï¼Œå¸‚æ°‘éƒ½æœƒå¹³æ™‚å»çš„åœ°æ–¹ï¼Œå””é€šæœåº¦æœ‰å’©ç‰¹åˆ¥?ã€ä½ æ€è€ƒè‘—ã€‚</p>
            </div>
            <div class="dialogue-container show" id="stage3-dialogue">
                <p class="dialogue-text"><span class="dialogue-name">çªç ´æ–¹æ³•:</span>åƒè€ƒé—œå¡éŠæˆ²å¡ç‰‡</p>
            </div>
            <div class="location-guide">
                <h3 class="location-title"><span class="location-icon">ğŸ“</span>ç•¶å‰ä½ç½®</h3>
                <div class="location-path">
                    <div class="location-step">å–„åŒ¯</div>
                    <span class="location-arrow">â†’</span>
                    <div class="location-step">ç†Ÿæ‚‰çš„å·´å£«ç·š</div>
                    <span class="location-arrow">â†’</span>
                    <div class="location-step">é¤å»³</div>
                    <span class="location-arrow">â†’</span>
                    <div class="location-step active">ä¼‘æ†©è™•</div>
                </div>
                <p class="location-clue">å¯†ç¢¼éœ€è¦é€éå®Œæˆä»»å‹™å¾Œç²å¾—ã€‚</p>
            </div>
            <div class="story-section objective">
                <p><strong>ç›®æ¨™ï¼š</strong>å‚³å‡ºæ­£ç¢ºçš„å¯†ç¢¼</p>
            </div>
            <div class="community-map" id="communityMap">
                <svg width="100%" height="100%" viewBox="0 0 500 250">
                    <rect x="0" y="0" width="500" height="250" fill="#1a1a2e"/>
                    <path d="M50,125 L450,125 M250,50 L250,200" stroke="#303050" stroke-width="15" stroke-dasharray="10 5"/>
                    <g class="community-building" id="activityRoom">
                        <rect x="80" y="30" width="80" height="60" fill="none" stroke="#505080" stroke-width="2" stroke-dasharray="5 3"/>
                        <text class="community-label" x="120" y="65">å¯µç‰©å…¬åœ’</text>
                    </g>
                    <g class="community-building" id="infoCenter">
                        <rect x="210" y="100" width="80" height="60" fill="none" stroke="#505080" stroke-width="2" stroke-dasharray="5 3"/>
                        <text class="community-label" x="250" y="135">æœ‰è“‹</text>
                    </g>
                    <g class="community-building pulse" id="restArea">
                        <rect x="340" y="170" width="80" height="60" fill="none" stroke="#9050a0" stroke-width="2"/>
                        <text class="community-label" x="380" y="205">ä¼‘æ†©è™•</text>
                    </g>
                </svg>
            </div>
            <div class="input-section">
                <p class="hint">æç¤ºï¼šå°‹æ‰¾ç´…è±é“è£¡é ‚å¤©ç«‹åœ°çš„å€åŸŸ</p>
                <input type="text" id="stage3Input" placeholder="è¼¸å…¥å¯†ç¢¼...">
                <button id="stage3Btn">ç¢ºèª</button>
                <p class="error-message" id="stage3Error"></p>
                <button class="challenge-btn" id="challenge3Btn" style="display: none;">é€²å…¥æŒ‘æˆ°ï¼šå¿ƒé€£å¿ƒå‚³å¯†ç¢¼</button>
            </div>
            <div class="key-effect" style="display: none;">
                <svg width="50" height="50" viewBox="0 0 50 50">
                    <path d="M10 10 L20 20 M20 10 L10 20" stroke="#fbdc05" stroke-width="2"/>
                </svg>
            </div>
            <div class="hint-card" id="hint3">
                <p>ä½ ç²å¾—ã€ç¤¾å€æ¢ç´¢ã€‘åŠŸèƒ½ï¼Œä¸¦è«‹å‰å¾€ä¸‹ä¸€å€‹ç›®çš„åœ°ï¼šå°é£Ÿåº—!!</p>
            </div>
            <button class="hint-btn" id="showHint3">ä¸‹ä¸€ç«™åœ°é»</button>
        </div>

        <!-- ç¬¬å››é—œï¼šå°é£Ÿåº— -->
        <div class="stage" id="stage4">
            <h2 class="stage-title">ç¬¬å››é—œï¼šè§£é¥ (é»˜å¥‘å¤§è€ƒé©—å‹•ä½œç¯‡)</h2>
            <div class="story-section">
                <p>ï¼Šæ•…äº‹åŠ‡æƒ…ï¼Š</p>
                <p>æ¯å€‹äººå…§å¿ƒéƒ½æœ‰ä¸åŒè²éŸ³ï¼Œå¦‚ä½•æ‰¾åˆ°å…±è­˜ã€‚</p>
                <p>ã€Œå»ºç«‹å…±åŒçš„å›æ†¶ã€</p>
            </div>
            <div class="dialogue-container show" id="stage4-dialogue">
                <p class="dialogue-text"><span class="dialogue-name">çªç ´æ–¹æ³•:</span>åƒè€ƒé—œå¡éŠæˆ²å¡ç‰‡</p>
            </div>
            <div class="location-guide">
                <h3 class="location-title"><span class="location-icon">ğŸ“</span>ç•¶å‰ä½ç½®</h3>
                <div class="location-path">
                    <div class="location-step">å–„åŒ¯</div>
                    <span class="location-arrow">â†’</span>
                    <div class="location-step">ç†Ÿæ‚‰çš„å·´å£«ç·š</div>
                    <span class="location-arrow">â†’</span>
                    <div class="location-step">é¤å»³</div>
                    <span class="location-arrow">â†’</span>
                    <div class="location-step">ç´…è±é“ä¼‘æ†©åœ°</div>
                    <span class="location-arrow">â†’</span>
                    <div class="location-step active">å°é£Ÿåº—</div>
                </div>
                <p class="location-clue">å¯†ç¢¼éœ€è¦é€éå®Œæˆä»»å‹™å¾Œç²å¾—ã€‚</p>
            </div>
            <div class="story-section objective">
                <p><strong>ç›®æ¨™ï¼š</strong>çæƒœæ‰€æ“æœ‰çš„ä¸€åˆ†é˜ï¼Œæ€è€ƒå¦‚ä½•åšå‡ºç›¸åŒçš„å‹•ä½œ</p>
            </div>
            <div class="treasure-box" id="treasureBox"></div>
            <div class="money-collection">
                <div class="money-item">
                    <span class="money-value">å®¶</span>
                </div>
                <div class="money-item">
                    <span class="money-value">å’Œ</span>
                </div>
                <div class="money-item">
                    <span class="money-value">è¬äº‹</span>
                </div>
                <div class="money-item">
                    <span class="money-value">èˆˆ</span>
                </div>
            </div>
            <div class="story-section note">
                <p>å›šç¦å…§å¿ƒçš„å¯¶ç®±åœ¨å‘Šè¨´ä½ ï¼Œæ™‚é–“ç„¡å¤šï¼Œå„€å¼ä¸€æ—¦å®Œæˆï¼Œå­¤ç¨å¾æ­¤é™è‡¨åˆ°æ¯å€‹äººèº«ä¸Š...</p>
            </div>
            <div class="input-section">
                <p class="hint">/</p>
                <input type="password" id="stage4Input" placeholder="è¼¸å…¥å¯†ç¢¼...">
                <button id="stage4Btn">é–‹å•Ÿ</button>
                <p class="error-message" id="stage4Error"></p>
                <button class="challenge-btn" id="challenge4Btn" style="display: none;">é€²å…¥æŒ‘æˆ°ï¼šé»˜å¥‘å¤§è€ƒé©—å‹•ä½œç¯‡</button>
            </div>
            <div class="key-effect" style="display: none;">
                <svg width="50" height="50" viewBox="0 0 50 50">
                    <path d="M10 10 L20 20 M20 10 L10 20" stroke="#fbdc05" stroke-width="2"/>
                </svg>
            </div>
            <div class="hint-card" id="hint4">
                <p>ä½ ç²å¾—ã€é‡‘éŒ¢ã€‘åŠŸèƒ½ï¼Œä¸¦è«‹å‰å¾€ä¸‹ä¸€å€‹ç›®çš„åœ°ï¼šå®¶èˆˆ!!</p>
            </div>
            <button class="hint-btn" id="showHint4">ä¸‹ä¸€ç«™åœ°é»</button>
        </div>

        <!-- ç¬¬äº”é—œï¼šå®¶èˆˆ -->
        <div class="stage" id="stage5">
            <h2 class="stage-title">ç¬¬äº”é—œï¼šå®¶å’Œè¬äº‹èˆˆ (é–‹å£ä¸­)</h2>
            <div class="story-section">
                <p>ï¼Šæ•…äº‹åŠ‡æƒ…ï¼Š</p>
                <p>é€™è£¡æœ‰å„ç¨®é£Ÿç‰©çš„åœ–åƒå’Œè¨˜æ†¶ã€‚ä½ éœ€è¦æ‰¾å‡ºé€™äº›é£Ÿç‰©ä»£è¡¨çš„å…±åŒå ´æ‰€ã€‚</p>
                <p>ã€Œé€™è£¡æœ‰äº›å¯†ç¢¼...éœ€è¦è²·åˆ°ç›¸é—œçš„è—¥æ°´ã€</p>
                <p>ä½ é–‹å§‹ç†è§£ä¸€å€‹äººæ˜¯ç„¡æ³•åˆ°é”é€™è£¡ã€‚</p>
            </div>
            <div class="dialogue-container show" id="stage5-dialogue">
                <p class="dialogue-text"><span class="dialogue-name">çªç ´æ–¹æ³•:</span>åƒè€ƒé—œå¡éŠæˆ²å¡ç‰‡</p>
            </div>
            <div class="location-guide">
                <h3 class="location-title"><span class="location-icon">ğŸ“</span>ç•¶å‰ä½ç½®</h3>
                <div class="location-path">
                    <div class="location-step">å–„åŒ¯</div>
                    <span class="location-arrow">â†’</span>
                    <div class="location-step">ç†Ÿæ‚‰çš„å·´å£«ç·š</div>
                    <span class="location-arrow">â†’</span>
                    <div class="location-step">é¤å»³</div>
                    <span class="location-arrow">â†’</span>
                    <div class="location-step">ç´…è±é“ä¼‘æ†©åœ°</div>
                    <span class="location-arrow">â†’</span>
                    <div class="location-step">å°é£Ÿåº—</div>
                    <span class="location-arrow">â†’</span>
                    <div class="location-step active">å®¶èˆˆ</div>
                </div>
                <p class="location-clue">å¯†ç¢¼éœ€è¦é€éå®Œæˆä»»å‹™å¾Œç²å¾—ã€‚</p>
            </div>
            <div class="story-section objective">
                <p><strong>ç›®æ¨™ï¼š</strong>ä¸€æ–¹é¢è¦çŒœä¸­ï¼Œå¦ä¸€æ–¹é¢è¦è¨˜è‘—æç¤º</p>
            </div>
            <div class="inventory" id="foodInventory">
                <div class="food-item">
                    <div class="food-img">ğŸ—</div>
                    <p>é›ç¿¼</p>
                </div>
                <div class="food-item">
                    <div class="food-img">ğŸš</div>
                    <p>ç±³é£¯</p>
                </div>
                <div class="food-item">
                    <div class="food-img">ğŸ¥š</div>
                    <p>è’¸æ°´è›‹</p>
                </div>
                <div class="food-item">
                    <div class="food-img">ğŸ¦</div>
                    <p>è¶Šå—è¦</p>
                </div>
                <div class="food-item">
                    <div class="food-img">ğŸ·</div>
                    <p>èŠ±é›•é…’</p>
                </div>
                <div class="food-item">
                    <div class="food-img">ğŸ§</div>
                    <p>è›‹ç³•</p>
                </div>
            </div>
            <div class="story-section note">
                <p>ç•¶ä½ è§¸ç¢°é€™äº›é£Ÿç‰©åœ–åƒæ™‚ï¼Œé–ƒéä¸€äº›æ¨¡ç³Šçš„è¨˜æ†¶ç‰‡æ®µï¼šäººå€‘è²·è³£ã€äº¤è«‡ã€è¨åƒ¹é‚„åƒ¹çš„å ´æ™¯ï¼Œé€™äº›éƒ½ç™¼ç”Ÿåœ¨ä¸€å€‹ç†±é¬§çš„åœ°æ–¹...</p>
            </div>
            <div class="input-section">
                <p class="hint">æç¤ºï¼šé€™äº›é£Ÿç‰©å…±åŒä»£è¡¨è‘—ç¤¾å€ä¸­çš„å“ªå€‹åœ°æ–¹ï¼Ÿ</p>
                <input type="text" id="stage5Input" placeholder="è¼¸å…¥å¯†ç¢¼...">
                <button id="stage5Btn">ç¢ºèª</button>
                <p class="error-message" id="stage5Error"></p>
                <button class="challenge-btn" id="challenge5Btn" style="display: none;">é€²å…¥æŒ‘æˆ°ï¼šé–‹å£ä¸­</button>
            </div>
            <div class="key-effect" style="display: none;">
                <svg width="50" height="50" viewBox="0 0 50 50">
                    <path d="M10 10 L20 20 M20 10 L10 20" stroke="#fbdc05" stroke-width="2"/>
                </svg>
            </div>
            <div class="hint-card" id="hint5">
                <p>ä½ ç²å¾—ã€å¿ƒéˆç›¸é€šã€‘åŠŸèƒ½ï¼Œä¸¦è«‹å‰å¾€ä¸‹ä¸€å€‹ç›®çš„åœ°ï¼šè¡—å¸‚!!</p>
            </div>
            <button class="hint-btn" id="showHint5">ä¸‹ä¸€ç«™åœ°é»</button>
        </div>

        <!-- ç¬¬å…­é—œï¼šè¡—å¸‚ -->
        <div class="stage" id="stage6">
            <h2 class="stage-title">ç¬¬å…­é—œï¼šåœ¨å½¼æ­¤ç”Ÿå‘½ç›¸é‡ (å¤§é›»è¦–è§£è¬)</h2>
            <div class="story-section">
                <p>ï¼Šæ•…äº‹åŠ‡æƒ…ï¼Š</p>
                <p>ä½ ä¾†åˆ°è¡—å¸‚ï¼Œé€™è£¡ç†±é¬§éå‡¡ï¼Œå……æ»¿äº†é£Ÿç‰©å’Œäººæƒ…å‘³ã€‚åœ¨é€™è£¡ï¼Œæ‰€æœ‰çš„ç·šç´¢å’Œè¨˜æ†¶éƒ½äº¤åŒ¯åœ¨ä¸€èµ·ï¼ŒæŒ‡å‘æœ€çµ‚çš„ç›®çš„åœ°ã€‚</p>
                <p>ã€Œå®¶èˆ‡å›æ†¶ï¼Œé‚Šå€‹åœ°æœ‰ä¼¼å®¶çš„æ„Ÿè¦ºï¼Œåˆæœ‰å‘¢Dé£Ÿç‰©å›æ†¶ï¼Œå°±ä¿‚å–„åŒ¯ï¼Œç„¶å¾Œå›å–„åŒ¯ã€</p>
                <p>åœ¨è¡—å¸‚ä¸­æ¼«æ­¥ï¼Œä½ æ„Ÿå—åˆ°é€™è£¡èˆ‡æ‰€æœ‰åœ°æ–¹çš„é€£çµï¼Œä½†åŒæ™‚ä¹Ÿæ˜ç™½é€™åªæ˜¯æ—…ç¨‹çš„ä¸€éƒ¨åˆ†ï¼ŒçœŸæ­£çš„ã€Œå®¶ã€é‚„åœ¨åˆ¥è™•ã€‚</p>
            </div>
            <div class="dialogue-container show" id="stage6-dialogue">
                <p class="dialogue-text"><span class="dialogue-name">çªç ´æ–¹æ³•:</span>åƒè€ƒé—œå¡éŠæˆ²å¡ç‰‡</p>
            </div>
            <div class="location-guide">
                <h3 class="location-title"><span class="location-icon">ğŸ“</span>ç•¶å‰ä½ç½®</h3>
                <div class="location-path">
                    <div class="location-step">å–„åŒ¯</div>
                    <span class="location-arrow">â†’</span>
                    <div class="location-step">ç†Ÿæ‚‰çš„å·´å£«ç·š</div>
                    <span class="location-arrow">â†’</span>
                    <div class="location-step">é¤å»³</div>
                    <span class="location-arrow">â†’</span>
                    <div class="location-step">ç´…è±é“ä¼‘æ†©åœ°</div>
                    <span class="location-arrow">â†’</span>
                    <div class="location-step">å°é£Ÿåº—</div>
                    <span class="location-arrow">â†’</span>
                    <div class="location-step">å®¶èˆˆ</div>
                    <span class="location-arrow">â†’</span>
                    <div class="location-step active">è¡—å¸‚</div>
                </div>
                <p class="location-clue">å¯†ç¢¼éœ€è¦é€éå®Œæˆä»»å‹™å¾Œç²å¾—ã€‚</p>
            </div>
            <div class="story-section objective">
                <p><strong>ç›®æ¨™ï¼š</strong>æ€è€ƒå¦‚ä½•è¡¨é”ï¼Œå“ªäº›äººä¼°ï¼Œå“ªäº›äººå®¹æ˜“è¡¨é”</p>
            </div>
            <div class="map-container" id="finalMap">
                <div class="location" style="top: 20%; left: 20%">
                    <span class="location-label">å®¶èˆˆ</span>
                </div>
                <div class="location" style="top: 40%; left: 50%">
                    <span class="location-label">è¡—å¸‚ã€å®¶èˆˆ</span>
                </div>
                <div class="location" style="top: 60%; left: 70%">
                    <span class="location-label">ç´…è±é“ä¼‘æ†©è™•</span>
                </div>
                <div class="location" style="top: 70%; left: 30%">
                    <span class="location-label">é¤å»³ã€å°é£Ÿåº—</span>
                </div>
                <div class="location" style="top: 40%; left: 80%">
                    <span class="location-label">ç†Ÿæ‚‰çš„å·´å£«ç·š</span>
                </div>
                <div class="location pulse" style="top: 70%; left: 50%">
                    <span class="location-label">you</span>
                </div>
            </div>
            <div class="story-section note">
                <p>ç•¶ä½ åœ¨è¡—å¸‚ä¸­æµé€£ï¼Œç™¼ç¾æ‰€æœ‰çš„å•†è²©ã€é¡§å®¢éƒ½åœ¨è«‡è«–è‘—åŒä¸€å€‹åœ°æ–¹ï¼Œé‚£æ˜¯ç¤¾å€çš„å¿ƒè‡Ÿï¼Œæ‰€æœ‰äººæƒ…å‘³å’Œé€£çµçš„æºé ­ï¼Œå®ƒçš„åå­—æ˜¯...</p>
            </div>
            <div class="input-section">
                <p class="hint">è¼¸å…¥æœ€å¾Œå¯†ç¢¼ï¼Œä¸¦å‰å¾€çµ‚é»å®ŒæˆéŠæˆ²</p>
                <input type="text" id="stage6Input" placeholder="è¼¸å…¥å¯†ç¢¼...">
                <button id="stage6Btn">ç¢ºèª</button>
                <p class="error-message" id="stage6Error"></p>
                <button class="challenge-btn" id="challenge6Btn" style="display: none;">é€²å…¥æŒ‘æˆ°ï¼šå¤§é›»è¦–è§£è¬</button>
            </div>
            <div class="key-effect" style="display: none;">
                <svg width="50" height="50" viewBox="0 0 50 50">
                    <path d="M10 10 L20 20 M20 10 L10 20" stroke="#fbdc05" stroke-width="2"/>
                </svg>
            </div>
            <div class="hint-card" id="hint6">
                <p>ä½ ç²å¾—ã€å›å¾©è¨˜æ†¶ã€‘åŠŸèƒ½ï¼Œä¸¦è«‹å‰çµ‚æ¥µç›®çš„åœ°!!</p>
            </div>
            <button class="hint-btn" id="showHint6">ä¸‹ä¸€ç«™åœ°é»</button>
        </div>

        <!-- çµå±€ -->
        <div class="stage" id="ending">
            <h2 class="stage-title">å¿ƒä¹‹å›æ­¸ï¼šå°‹å›ã€Œå®¶ã€çš„æ„Ÿè¦º</h2>
            <div class="story-section">
                <p>ç•¶ä½ èªªå‡ºã€Œå–„åŒ¯ã€çš„åå­—ï¼Œæ‰€æœ‰è¨˜æ†¶ç¬é–“èåˆï¼Œå¼·çƒˆçš„å…‰èŠ’é–ƒè€€ã€‚ä½ çµ‚æ–¼æ‰¾åˆ°äº†å¿ƒä¹‹é–åŒ™ï¼Œä¹Ÿæ‰¾åˆ°äº†çœŸæ­£çš„ã€Œå®¶ã€ã€‚</p>
                <p>ã€Œæ­å–œä½ æ‰¾åˆ°äº†å¿ƒä¹‹é–åŒ™ã€‚ç¾åœ¨ä½ æ˜ç™½äº†ï¼Œå–„åŒ¯ä¸åƒ…æ˜¯ä¸€å€‹åœ°æ–¹ï¼Œæ›´æ˜¯ä¸€ç¨®é€£çµã€ä¸€ç¨®æƒ…æ„Ÿã€ä¸€ç¨®æ­¸å±¬æ„Ÿã€‚ã€</p>
                <p>ã€Œä½ ä¸æ˜¯å­¤å–®çš„æ—…è¡Œè€…ï¼Œå¯¦éš›ä¸Šï¼Œä½ ä¸€ç›´éƒ½æ˜¯å–„åŒ¯çš„ä¸€éƒ¨åˆ†ï¼Œè€Œå–„åŒ¯çš„è¨˜æ†¶ä¹Ÿæ˜¯ä½ çš„ä¸€éƒ¨åˆ†ã€‚ã€</p>
            </div>
            <div class="dialogue-container show" id="ending-dialogue">
                <p class="dialogue-text"><span class="dialogue-name">æˆ‘å€‘:</span>åŒ¯ä¸åªæ˜¯ä¸€å€‹åœ°æ–¹ï¼Œè€Œæ˜¯æˆ‘å€‘å…±åŒå‰µé€ çš„å¿ƒéˆå®¶åœ’ã€‚</p>
            </div>
            <div class="void-heart filling" id="endingHeart"></div>
            <div class="location-guide">
                <h3 class="location-title"><span class="location-icon">ğŸ </span>å›åˆ°èµ·é»</h3>
                <div class="location-path">
                    <div class="location-step">å–„åŒ¯</div>
                    <span class="location-arrow">â†’</span>
                    <div class="location-step">ç†Ÿæ‚‰çš„å·´å£«ç·š</div>
                    <span class="location-arrow">â†’</span>
                    <div class="location-step">é¤å»³</div>
                    <span class="location-arrow">â†’</span>
                    <div class="location-step">ç´…è±é“ä¼‘æ†©åœ°</div>
                    <span class="location-arrow">â†’</span>
                    <div class="location-step">å°é£Ÿåº—</div>
                    <span class="location-arrow">â†’</span>
                    <div class="location-step">å®¶èˆˆ</div>
                    <span class="location-arrow">â†’</span>
                    <div class="location-step">è¡—å¸‚</div>
                    <span class="location-arrow">â†’</span>
                    <div class="location-step active">å–„åŒ¯(çµ‚é»)</div>
                </div>
                <p class="location-clue">æ—…ç¨‹çµæŸäº†ï¼Œä½†ã€Œå®¶ã€çš„æ•…äº‹æ‰å‰›å‰›é–‹å§‹ã€‚</p>
            </div>
            <div class="story-section">
                <p>å…‰èŠ’æ¼¸æ¼¸æ¶ˆæ•£ï¼Œè¿·éœ§æ•£å»ã€‚ä½ ç™¼ç¾è‡ªå·±ç«™åœ¨ç†Ÿæ‚‰çš„å–„åŒ¯ï¼Œå‘¨åœæ˜¯ç†Ÿæ‚‰çš„é¢å­”ï¼Œä½†é€™æ¬¡ï¼Œæ¯å€‹äººçš„çœ¼ä¸­éƒ½å……æ»¿äº†ç”Ÿå‘½åŠ›å’Œæƒ…æ„Ÿã€‚</p>
                <p>ä½ ç’°é¡§å››å‘¨ï¼Œç†è§£äº†ä¸€åˆ‡ã€‚é€™ä¸æ˜¯ä¸€å€‹è¿·é€”çš„ç•°ç©ºé–“ï¼Œè€Œæ˜¯ä½ å€‘å…±åŒå‰µé€ çš„å®¶åœ’ã€‚è€Œã€Œå¿ƒä¹‹é–åŒ™ã€ï¼Œæ­£æ˜¯å½¼æ­¤é–“çš„é€£çµå’Œé—œæ‡·ã€‚</p>
            </div>
            <div class="achievements">
                <div class="achievement unlocked" id="achievement1End">
                    ğŸ”
                    <span class="achievement-label">è¿·å¢ƒæ¢ç´¢è€…</span>
                </div>
                <div class="achievement unlocked" id="achievement2End">
                    ğŸ’¬
                    <span class="achievement-label">è™›å¯¦é€£çµè€…</span>
                </div>
                <div class="achievement unlocked" id="achievement3End">
                    ğŸ§©
                    <span class="achievement-label">è¬é¡Œè§£é–è€…</span>
                </div>
                <div class="achievement unlocked" id="achievement4End">
                    ğŸ¤
                    <span class="achievement-label">å¿ƒéˆä¿®å¾©å¸«</span>
                </div>
                <div class="achievement unlocked" id="achievement5End">
                    ğŸ†
                    <span class="achievement-label">å–„åŒ¯å®ˆè­·è€…</span>
                </div>
            </div>
            <div class="effect-container" id="endingEffect"></div>
            <div class="notebook" id="notebook-ending">
                <div class="notebook-inner">
                    <div class="notebook-front">
                        <div class="envelope-icon">âœ‰ï¸</div>
                    </div>
                    <div class="notebook-back">
                        <h3 class="notebook-title">è¿·é€”ç­†è¨˜ - çµ‚ç« </h3>
                        <p class="notebook-entry">æ—…ç¨‹çµæŸäº†ï¼Œæ‰¾å›å¿ƒä¹‹é–åŒ™ä¸¦ä¸æ˜¯æ‰¾åˆ°æŸå€‹ç‰©å“ï¼Œè€Œæ˜¯é‡æ–°é€£æ¥èˆ‡ç¤¾å€ã€èˆ‡ä»–äººçš„æƒ…æ„Ÿç´å¸¶ã€‚</p>
                        <p class="notebook-entry"><span class="notebook-highlight">å–„åŒ¯</span>ä¸åªæ˜¯ä¸€å€‹åœ°æ–¹ï¼Œè€Œæ˜¯æ‰€æœ‰äººå…±åŒå‰µé€ çš„<span class="notebook-highlight">å¿ƒéˆå®¶åœ’</span>ã€‚æ­£å¦‚å®ƒçš„åå­—æ‰€æš—ç¤ºï¼šå–„è‰¯åŒ¯èšä¹‹è™•ï¼Œå°±æ˜¯æˆ‘çœŸæ­£çš„å®¶ã€‚</p>
                    </div>
                </div>
            </div>
            <div class="input-section">
                <button id="restartBtn">é‡æ–°é–‹å§‹æ—…ç¨‹</button>
            </div>
        </div>

        <!-- Code2 é—œå¡ -->
        <!-- ç´…è±é“ - å¿ƒé€£å¿ƒå‚³å¯†ç¢¼ -->
        <div class="game-section" id="community-center">
            <div class="game-title">
                <span class="location-tag">ç´…è±é“</span>
                <h3>å¿ƒé€£å¿ƒå‚³å¯†ç¢¼</h3>
            </div>
            <div class="game-description">
                <p>åœ¨é€™å€‹æŒ‘æˆ°ä¸­ï¼Œä½ å€‘éœ€è¦åœæˆä¸€åœˆï¼Œé–‰ä¸Šçœ¼ç›ï¼Œæ‰‹æ‹‰æ‰‹å‚³éå¯†ç¢¼ï¼ˆé€šéæ¡æ‰‹å’Œæ‹å­æ–¹å¼ï¼‰ã€‚</p>
                <p>å·¥ä½œå“¡æœƒéš¨æ©Ÿæ‰“å‡ºä¸€æ®µå¯†ç¢¼ï¼Œä½ å€‘éœ€è¦æº–ç¢ºåœ°å‚³éé€™å€‹å¯†ç¢¼ã€‚éš¨è‘—å˜—è©¦æ¬¡æ•¸çš„æ¸›å°‘ï¼Œé›£åº¦æœƒé€æ¼¸å¢åŠ ã€‚</p>
                <p>åªæœ‰ç•¶å¯†ç¢¼å®Œæ•´å‚³éä¸€åœˆï¼Œæ‰èƒ½ç®—ä½œæˆåŠŸï¼</p>
            </div>
            <div class="game-content circle-game">
                <div class="circle-animation" id="circle-container">
                    <!-- ç©å®¶åœ–ç¤ºå°‡é€šéJSå‹•æ…‹ç”Ÿæˆ -->
                </div>
                <div class="password-display" id="password-display">- - - -</div>
                <div class="attempts-counter">å‰©é¤˜å˜—è©¦æ¬¡æ•¸: <span id="attempts">3</span></div>
            </div>
            <div class="control-panel">
                <button class="control-button" id="generate-password">ç”Ÿæˆå¯†ç¢¼</button>
                <button class="control-button" id="simulate-game">æ¨¡æ“¬éŠæˆ²</button>
                <button class="control-button" id="reset-circle-game">é‡ç½®</button>
                <button class="control-button" id="return-stage3">å®ŒæˆæŒ‘æˆ°ï¼Œè¿”å›è¼¸å…¥å¯†ç¢¼</button>
            </div>
            <div class="success-message" id="circle-success">
                æ­å–œï¼å¯†ç¢¼æˆåŠŸå‚³éå®Œæˆã€‚è«‹é»æ“Šã€Œå®ŒæˆæŒ‘æˆ°ã€è¿”å›è¼¸å…¥å¯†ç¢¼ã€‚
            </div>
        </div>

        <!-- äº¤é€š - å·´å£«ç·šé…å° -->
        <div class="game-section" id="bus-route">
            <div class="game-title">
                <span class="location-tag">äº¤é€š</span>
                <h3>å·´å£«ç·šé…å°</h3>
            </div>
            <div class="game-description">
                <p>åœ¨ç´…ç£¡æ¸¯éµç«™å°å‡ºå·´å£«ç¸½ç«™ï¼Œå®Œæˆä»¥ä¸‹å·´å£«ç·šè·¯é…å°ä»»å‹™ã€‚</p>
                <p>å¡«å¯«æ­£ç¢ºçš„å·´å£«ç·šï¼Œé…å°åˆé©çš„ç›®çš„åœ°ã€‚å¡«å¯«å®Œæˆå¾Œï¼Œåœ¨ä¸Šè»Šä½ç½®æ‹ç…§ç•™å¿µã€‚</p>
                <p>ç¸½å…±æœ‰5é“é¡Œç›®ï¼Œå…¨éƒ¨ç­”å°æ‰èƒ½ç²å¾—ä¸‹ä¸€å€‹åœ°é»çš„æç¤ºã€‚</p>
            </div>
            <div class="game-content bus-matching">
                <div class="bus-question">
                    <span>1. ç´…ç£¡ - (</span>
                    <input type="text" class="bus-answer" data-answer="15X" placeholder="å·´å£«ç·š">
                    <span>) è—ç”°</span>
                    <div class="check-result">
                        <span class="check-icon">âœ“</span>
                    </div>
                </div>
                <div class="bus-question">
                    <span>2. ç´…ç£¡ - (</span>
                    <input type="text" class="bus-answer" data-answer="11K" placeholder="å·´å£«ç·š">
                    <span>) ç«¹åœ’</span>
                    <div class="check-result">
                        <span class="check-icon">âœ“</span>
                    </div>
                </div>
                <div class="bus-question">
                    <span>3. ç´…ç£¡ - (</span>
                    <input type="text" class="bus-answer" data-answer="87D" placeholder="å·´å£«ç·š">
                    <span>) é¦¬éå±±é‹å‹•å ´</span>
                    <div class="check-result">
                        <span class="check-icon">âœ“</span>
                    </div>
                </div>
                <div class="bus-question">
                    <span>4. ç´…ç£¡ - (</span>
                    <input type="text" class="bus-answer" data-answer="A20/A21" placeholder="å·´å£«ç·š">
                    <span>) æ©Ÿå ´</span>
                    <div class="check-result">
                        <span class="check-icon">âœ“</span>
                    </div>
                </div>
                <div class="bus-question">
                    <span>5. é€šå®µæ™‚é–“ç´…ç£¡ - (</span>
                    <input type="text" class="bus-answer" data-answer="N271" placeholder="å·´å£«ç·š">
                    <span>) å¤§åŸ”</span>
                    <div class="check-result">
                        <span class="check-icon">âœ“</span>
                    </div>
                </div>
            </div>
            <div class="control-panel">
                <button class="control-button" id="check-bus-answers">æª¢æŸ¥ç­”æ¡ˆ</button>
                <button class="control-button" id="reset-bus-game">é‡ç½®</button>
                <button class="control-button" id="return-stage1">å®ŒæˆæŒ‘æˆ°ï¼Œè¿”å›è¼¸å…¥å¯†ç¢¼</button>
            </div>
            <div class="success-message" id="bus-success">
                æ­å–œï¼å…¨éƒ¨ç­”å°ã€‚è«‹é»æ“Šã€Œå®ŒæˆæŒ‘æˆ°ã€è¿”å›è¼¸å…¥å¯†ç¢¼ã€‚
            </div>
        </div>

        <!-- ä¼‘æ†©è™• - é»˜å¥‘å¤§è€ƒé©—å‹•ä½œç¯‡ -->
        <div class="game-section" id="rest-area">
            <div class="game-title">
                <span class="location-tag">ä¼‘æ†©è™•</span>
                <h3>é»˜å¥‘å¤§è€ƒé©—å‹•ä½œç¯‡</h3>
            </div>
            <div class="game-description">
                <p>åœ¨ç´…è±é“ä¼‘æ†©è™•ï¼Œé€²è¡Œé»˜å¥‘å¤§è€ƒé©—ã€‚</p>
                <p>å·¥ä½œå“¡æœƒå‡ºä¸€æ¢é¡Œç›®ï¼Œæ•¸1ã€2ã€3å¾Œï¼Œæ‰€æœ‰çµ„å“¡è¦åšå‡ºç›¸åŒçš„å‹•ä½œã€‚</p>
                <p>æˆåŠŸå®Œæˆ3é¡Œæˆ–ä»¥ä¸Šï¼Œå°çµ„å¯ç²å¾—$100ç¾é‡‘çå‹µï¼</p>
            </div>
            <div class="game-content action-challenge">
                <div class="action-display" id="action-display">é»æ“Šä¸‹æ–¹æŒ‰éˆ•é–‹å§‹</div>
                <div class="countdown" id="countdown"></div>
                <div class="success-counter">æˆåŠŸæ¬¡æ•¸: <span id="action-success-count">0</span>/10</div>
            </div>
            <div class="control-panel">
                <button class="control-button" id="next-action">ä¸‹ä¸€å€‹å‹•ä½œ</button>
                <button class="control-button" id="start-countdown">é–‹å§‹å€’æ•¸</button>
                <button class="control-button" id="mark-success">æ¨™è¨˜æˆåŠŸ</button>
                <button class="control-button" id="return-stage4">å®ŒæˆæŒ‘æˆ°ï¼Œè¿”å›è¼¸å…¥å¯†ç¢¼</button>
            </div>
            <div class="success-message" id="action-success">
                æ­å–œï¼å·²æˆåŠŸé”åˆ°ç›®æ¨™ã€‚è«‹é»æ“Šã€Œå®ŒæˆæŒ‘æˆ°ã€è¿”å›è¼¸å…¥å¯†ç¢¼ã€‚
            </div>
        </div>

        <!-- å®¶èˆˆ - é–‹å£ä¸­ -->
        <div class="game-section" id="ka-hing">
            <div class="game-title">
                <span class="location-tag">å®¶èˆˆ</span>
                <h3>é–‹å£ä¸­</h3>
            </div>
            <div class="game-description">
                <p>åœ¨å®¶èˆˆè¶…å¸‚ï¼Œé€²è¡Œé–‹å£ä¸­éŠæˆ²ã€‚</p>
                <p>å·¥ä½œå“¡æœƒè¨­å®šä¸€å€‹1åˆ°100çš„æ•¸å­—ï¼Œæ¯å€‹çµ„å“¡è¼ªæµçŒœæ•¸å­—ï¼Œé€æ¼¸ç¸®å°ç¯„åœï¼Œç›´åˆ°æœ‰äººçŒœä¸­æ­£ç¢ºæ•¸å­—ã€‚</p>
                <p>ç¸½å…±3å›åˆï¼Œæ¯çŒœä¸­ä¸€æ¬¡æœƒç²å¾—ä¸€å€‹æç¤ºã€‚é›†é½Šä¸‰å€‹æç¤ºå¾Œï¼Œéœ€è¦åœ¨è¶…å¸‚è³¼è²·æŒ‡å®šç‰©å“æ‰ç®—å®Œæˆä»»å‹™ã€‚</p>
            </div>
            <div class="game-content number-guessing">
                <h4>ç¬¬ <span id="round-count">1</span> å›åˆ</h4>
                <div class="number-range">ç¯„åœ: <span id="min-range">1</span> - <span id="max-range">100</span></div>
                <div class="guess-input">
                    <input type="number" id="guess-number" min="1" max="100" placeholder="è¼¸å…¥æ•¸å­—">
                    <button class="guess-button" id="submit-guess">çŒœï¼</button>
                </div>
                <div class="clues-container">
                    <div class="clue" id="clue-1" data-target="27">
                        <h4>æç¤º 1:</h4>
                        <p>???</p>
                    </div>
                    <div class="clue" id="clue-2" data-target="78">
                        <h4>æç¤º 2:</h4>
                        <p>???</p>
                    </div>
                    <div class="clue" id="clue-3" data-target="34">
                        <h4>æç¤º 3:</h4>
                        <p>???</p>
                    </div>
                </div>
            </div>
            <div class="control-panel">
                <button class="control-button" id="reset-guess-game">é‡ç½®</button>
                <button class="control-button" id="reveal-answer">æ­æ›‰ç­”æ¡ˆ</button>
                <button class="control-button" id="return-stage5">å®ŒæˆæŒ‘æˆ°ï¼Œè¿”å›è¼¸å…¥å¯†ç¢¼</button>
            </div>
            <div class="success-message" id="guess-success">
                æ­å–œï¼ç²å¾—å…¨éƒ¨æç¤ºï¼šç½è£é£²å“ã€æœ‰æ±½çš„ã€ç´…è‰²ã€‚éœ€è¦è³¼è²·å¯æ¨‚æ‰èƒ½å®Œæˆä»»å‹™ï¼è«‹é»æ“Šã€Œå®ŒæˆæŒ‘æˆ°ã€è¿”å›è¼¸å…¥å¯†ç¢¼ã€‚
            </div>
        </div>

        <!-- é¤å»³/å°é£Ÿåº— - å­—æ¯æ‹¼å­—æŒ‘æˆ° -->
        <div class="game-section" id="restaurant">
            <div class="game-title">
                <span class="location-tag">é¤å»³/å°é£Ÿåº—</span>
                <h3>å­—æ¯æ‹¼å­—æŒ‘æˆ°</h3>
            </div>
            <div class="game-description">
                <p>åœ¨é¤å»³/å°é£Ÿåº—å‰ï¼Œé€²è¡Œå­—æ¯æ‹¼å­—æŒ‘æˆ°ã€‚</p>
                <p>çµ„å“¡éœ€ç”¨èº«é«”å§¿å‹¢çµ„æˆå­—æ¯ï¼Œæ‹¼å‡ºæŒ‡å®šå–®å­—ï¼Œä¸¦æ‹ç…§ç•™å¿µã€‚</p>
                <p>æ ¹æ“šåƒèˆ‡äººæ•¸ï¼ŒæŒ‘æˆ°çš„å–®è©æœƒæœ‰æ‰€ä¸åŒã€‚</p>
            </div>
            <div class="game-content letter-challenge">
                <div class="people-counter">
                    <button class="counter-button" id="decrease-people">-</button>
                    <div class="people-count" id="people-count">4</div>
                    <button class="counter-button" id="increase-people">+</button>
                </div>
                <h4>ä½ å€‘éœ€è¦æ‹¼å‡ºçš„å–®è©æ˜¯ï¼š</h4>
                <div class="word-display" id="word-display">LIKE</div>
            </div>
            <div class="control-panel">
                <button class="control-button" id="confirm-word">ç¢ºèªå®Œæˆ</button>
                <button class="control-button" id="return-stage2">å®ŒæˆæŒ‘æˆ°ï¼Œè¿”å›è¼¸å…¥å¯†ç¢¼</button>
            </div>
            <div class="success-message" id="word-success">
                æ­å–œï¼æˆåŠŸå®Œæˆæ‹¼å­—æŒ‘æˆ°ã€‚è«‹é»æ“Šã€Œå®ŒæˆæŒ‘æˆ°ã€è¿”å›è¼¸å…¥å¯†ç¢¼ã€‚
            </div>
        </div>

        <!-- è¡—å¸‚ - å¤§é›»è¦–è§£è¬ -->
        <div class="game-section" id="market">
            <div class="game-title">
                <span class="location-tag">è¡—å¸‚</span>
                <h3>å¤§é›»è¦–è§£è¬</h3>
            </div>
            <div class="game-description">
                <p>åœ¨è¡—å¸‚ï¼Œé€²è¡Œå¤§é›»è¦–è§£è¬éŠæˆ²ã€‚</p>
                <p>ä¸€ä½çµ„å“¡éœ€è¦ç”¨è‚¢é«”èªè¨€æˆ–æè¿°æ–¹å¼è¡¨é”é¡Œç›®ï¼Œä½†ä¸èƒ½èªªå‡ºé¡Œç›®ä¸­çš„é—œéµè©ï¼Œå…¶ä»–çµ„å“¡éœ€è¦çŒœå‡ºæ­£ç¢ºç­”æ¡ˆã€‚</p>
                <p>ç¸½å…±15é¡Œï¼Œç›®æ¨™æ˜¯è‡³å°‘å®Œæˆ8é¡Œæ‰èƒ½æˆåŠŸï¼</p>
            </div>
            <div class="game-content tv-game">
                <div class="tv-screen" id="tv-screen">
                    é»æ“Šã€Œä¸‹ä¸€é¡Œã€é–‹å§‹
                </div>
                <div class="tv-controls">
                    <button class="control-button" id="next-tv-word">ä¸‹ä¸€é¡Œ</button>
                    <button class="control-button" id="mark-tv-correct">ç­”å°</button>
                </div>
                <div class="progress-display">
                    é€²åº¦: <span id="tv-progress">0</span>/15 (ç›®æ¨™: 8é¡Œ)
                </div>
            </div>
            <div class="control-panel">
                <button class="control-button" id="reset-tv-game">é‡ç½®</button>
                <button class="control-button" id="return-stage6">å®ŒæˆæŒ‘æˆ°ï¼Œè¿”å›è¼¸å…¥å¯†ç¢¼</button>
            </div>
            <div class="success-message" id="tv-success">
                æ­å–œï¼æˆåŠŸå®Œæˆå¤§é›»è¦–è§£è¬ã€‚è«‹é»æ“Šã€Œå®ŒæˆæŒ‘æˆ°ã€è¿”å›è¼¸å…¥å¯†ç¢¼ã€‚
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            let currentStage = 0;
            const totalStages = 6;
            const stages = ['intro', 'stage1', 'stage2', 'stage3', 'stage4', 'stage5', 'stage6', 'ending'];
            const challenges = ['bus-route', 'restaurant', 'community-center', 'rest-area', 'ka-hing', 'market'];

            const answers = {
                stage1: 'sidebyside',
                stage2: 'socialworker',
                stage3: 'always',
                stage4: 'be',
                stage5: 'with',
                stage6: 'you'
            };

            const alternativeAnswers = {
                stage2: ['KYLE', 'kyle'],
                stage3: ['KYLE', 'kyle'],
                stage4: ['KYLE', 'kyle'],
                stage5: ['KYLE', 'kyle'],
                stage6: ['KYLE', 'kyle']
            };

        const cutscenes = {
            intro: { title: "èµ·é» (å–„åŒ¯)", text: "ã€Œé™Œç”Ÿé‚„æ˜¯ç†Ÿæ‚‰çš„ç¤¾å€?ã€" },
            stage1: { title: "ç¬¬ä¸€é—œï¼šå‡ºè¡Œæ˜“", text: "ã€Œæœ‰äººçŸ¥é“æˆ‘åœ¨å“ªè£¡å—?ã€" },
            stage2: { title: "ç¬¬äºŒé—œï¼šç†Ÿæ‚‰çš„äºº (é¤å»³)", text: "ä½ ç²å¾—ã€æ‰‹æ©Ÿé€šè¨Šâ€”å¯è‡´é›»ã€‘åŠŸèƒ½" },
            stage3: { title: "ç¬¬ä¸‰é—œï¼šä¼‘é¤Šç”Ÿæ¯ (ç´…è±é“ä¼‘æ†©è™•)", text: "ä½ ç²å¾—ã€è¨è«–å…±è­˜â€”1åˆ†é˜è¨è«–ã€‘åŠŸèƒ½" },
            stage4: { title: "ç¬¬å››é—œï¼šè§£é¥ (å°é£Ÿåº—)", text: "ä½ ç²å¾—ã€è¨è«–å…±è­˜â€”1åˆ†é˜è¨è«–ã€‘åŠŸèƒ½" },
            stage5: { title: "ç¬¬äº”é—œï¼šå®¶å’Œè¬äº‹èˆˆ (å®¶èˆˆ)", text: "ä½ ç²å¾—ã€å¿ƒéˆç›¸é€šæ©Ÿæœƒ3æ¬¡ã€‘åŠŸèƒ½" },
            stage6: { title: "ç¬¬å…­é—œï¼šåœ¨å½¼æ­¤ç”Ÿå‘½ç›¸é‡ (è¡—å¸‚)", text: "ä½ ç²å¾—ã€è·³é¡Œ3æ¬¡ã€‘åŠŸèƒ½" },
            ending: { title: "å›å®¶ (å–„åŒ¯)", text: "ç•¶ä½ èªªå‡ºã€Œå–„åŒ¯ã€çš„åå­—ï¼Œæ‰€æœ‰è¨˜æ†¶ç¬é–“èåˆï¼Œå¼·çƒˆçš„å…‰èŠ’é–ƒè€€ã€‚ä½ çµ‚æ–¼æ‰¾åˆ°äº†å¿ƒä¹‹é–åŒ™ï¼Œä¹Ÿæ‰¾åˆ°äº†çœŸæ­£çš„ã€Œå®¶ã€ã€‚" }
        };

                const envelopeContent = {
            intro: { title: "èµ·é» (å–„åŒ¯)", content: "Start" },
            stage1: { title: "ç¬¬ä¸€é—œï¼šå‡ºè¡Œæ˜“", content: "Remember" },
            stage2: { title: "ç¬¬äºŒé—œï¼šç†Ÿæ‚‰çš„äºº (é¤å»³)", content: "Remember: SideBySide" },
            stage3: { title: "ç¬¬ä¸‰é—œï¼šä¼‘é¤Šç”Ÿæ¯ (ç´…è±é“ä¼‘æ†©è™•)", content: "Remember: SideBySide Social worker" },
            stage4: { title: "ç¬¬å››é—œï¼šè§£é¥ (å°é£Ÿåº—)", content: "Remember: SideBySide Social worker always" },
            stage5: { title: "ç¬¬äº”é—œï¼šå®¶å’Œè¬äº‹èˆˆ (å®¶èˆˆ)", content: "Remember: SideBySide Social worker always be" },
            stage6: { title: "ç¬¬å…­é—œï¼šåœ¨å½¼æ­¤ç”Ÿå‘½ç›¸é‡ (è¡—å¸‚)", content: "Remember: SideBySide Social worker always be with" },
            ending: { title: "å›å®¶ (å–„åŒ¯)", content: "Remember: SideBySide Social worker always be with you<3" }
        };
        
            const notebooks = document.querySelectorAll('.notebook');
            notebooks.forEach(notebook => {
                notebook.addEventListener('click', function() {
                    this.classList.toggle('flipped');
                });
            });

            function updateProgress() {
                const progressBar = document.getElementById('progressBar');
                const progressPercentage = (currentStage / totalStages) * 100;
                progressBar.style.width = `${progressPercentage}%`;
                for (let i = 0; i <= totalStages; i++) {
                    const node = document.getElementById(`node${i}`);
                    if (node) {
                        if (i < currentStage) {
                            node.classList.remove('current', 'locked');
                            node.classList.add('completed');
                        } else if (i === currentStage) {
                            node.classList.remove('completed', 'locked');
                            node.classList.add('current');
                        } else {
                            node.classList.remove('completed', 'current');
                            node.classList.add('locked');
                        }
                    }
                }
            }

            function showEnvelope(stage) {
                const envelope = document.getElementById('envelope-container');
                const letterTitle = document.getElementById('letter-title');
                const letterContent = document.getElementById('letter-content');
                letterTitle.textContent = envelopeContent[stages[stage]].title;
                letterContent.textContent = envelopeContent[stages[stage]].content;
                envelope.classList.add('active');
                setTimeout(() => {
                    envelope.classList.add('opening');
                    setTimeout(() => {
                        envelope.classList.remove('opening');
                        setTimeout(() => {
                            envelope.classList.remove('active');
                            setTimeout(() => {
                                showCutscene(stage);
                            }, 500);
                        }, 2000);
                    }, 5000);
                }, 1000);
                envelope.addEventListener('click', function closeHandler() {
                    envelope.classList.remove('opening');
                    setTimeout(() => {
                        envelope.classList.remove('active');
                    }, 500);
                    envelope.removeEventListener('click', closeHandler);
                    setTimeout(() => {
                        showCutscene(stage);
                    }, 500);
                });
            }

            function showCutscene(stage) {
                const cutscene = document.getElementById('cutscene');
                const cutsceneTitle = document.getElementById('cutscene-title');
                const cutsceneText = document.getElementById('cutscene-text');
                cutsceneTitle.textContent = cutscenes[stages[stage]].title;
                cutsceneText.textContent = cutscenes[stages[stage]].text;
                cutscene.classList.add('active');
                cutscene.addEventListener('click', function closeHandler() {
                    cutscene.classList.remove('active');
                    cutscene.removeEventListener('click', closeHandler);
                });
                setTimeout(() => {
                    cutscene.classList.remove('active');
                }, 6000);
            }

            function switchStage(fromStage, toStage) {
                document.getElementById(stages[fromStage]).classList.remove('active');
                document.getElementById(stages[toStage]).classList.add('active');
                challenges.forEach(challenge => {
                    document.getElementById(challenge).classList.remove('active');
                });
                currentStage = toStage;
                updateProgress();
                notebooks.forEach(notebook => {
                    notebook.classList.remove('flipped');
                });
                document.getElementById(stages[toStage]).style.animation = 'none';
                setTimeout(() => {
                    document.getElementById(stages[toStage]).style.animation = 'fadeIn 1s ease';
                }, 10);
                showEnvelope(toStage);
                if (toStage === 2) initPhoneChat();
                else if (toStage === 4) initTreasureBox();
                else if (toStage === 7) createEndingEffect();
                createSceneTransitionEffect();
            }

            function showChallenge(challengeIndex) {
                document.getElementById(stages[currentStage]).classList.remove('active');
                challenges.forEach(challenge => {
                    document.getElementById(challenge).classList.remove('active');
                });
                document.getElementById(challenges[challengeIndex]).classList.add('active');
                createSceneTransitionEffect();
                if (challengeIndex === 0) resetBusGame();
                else if (challengeIndex === 2) resetCircleGame();
                else if (challengeIndex === 3) resetActionGame();
                else if (challengeIndex === 4) resetGuessGame();
                else if (challengeIndex === 5) resetTvGame();
            }

            function returnToStage(stageIndex) {
                document.getElementById(challenges[stageIndex - 1]).classList.remove('active');
                document.getElementById(stages[stageIndex]).classList.add('active');
                createSceneTransitionEffect();
            }

            function createSceneTransitionEffect() {
                const gameContainer = document.querySelector('.game-container');
                const effectContainer = document.createElement('div');
                effectContainer.className = 'effect-container';
                gameContainer.appendChild(effectContainer);
                for (let i = 0; i < 30; i++) {
                    const sparkle = document.createElement('div');
                    sparkle.className = 'sparkle';
                    sparkle.style.left = `${Math.random() * 100}%`;
                    sparkle.style.top = `${Math.random() * 100}%`;
                    sparkle.style.opacity = '0';
                    effectContainer.appendChild(sparkle);
                    setTimeout(() => {
                        sparkle.style.transition = 'all 0.8s ease';
                        sparkle.style.opacity = '1';
                        setTimeout(() => {
                            sparkle.style.opacity = '0';
                        }, 600);
                    }, Math.random() * 300);
                }
                setTimeout(() => {
                    effectContainer.remove();
                }, 1500);
            }
        
        function createEffect(element, type) {
            const effectContainer = document.createElement('div');
            effectContainer.className = 'effect-container';
            element.appendChild(effectContainer);
            if (type === 'confetti') {
                for (let i = 0; i < 50; i++) {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = `${Math.random() * 100}%`;
                    confetti.style.top = `${Math.random() * 100}%`;
                    confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
                    confetti.style.width = `${5 + Math.random() * 10}px`;
                    confetti.style.height = `${5 + Math.random() * 10}px`;
                    confetti.style.opacity = '1';
                    confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
                    effectContainer.appendChild(confetti);
                    setTimeout(() => {
                        confetti.style.transition = 'all 2s ease';
                        confetti.style.top = '100%';
                        confetti.style.opacity = '0';
                    }, Math.random() * 500);
                }
                setTimeout(() => {
                    effectContainer.remove();
                }, 3000);
            } else if (type === 'sparkle') {
                for (let i = 0; i < 30; i++) {
                    const sparkle = document.createElement('div');
                    sparkle.className = 'sparkle';
                    sparkle.style.left = `${Math.random() * 100}%`;
                    sparkle.style.top = `${Math.random() * 100}%`;
                    sparkle.style.opacity = '1';
                    effectContainer.appendChild(sparkle);
                    setTimeout(() => {
                        sparkle.style.transition = 'all 1s ease';
                        sparkle.style.transform = `translate(${(Math.random() - 0.5) * 100}px, ${(Math.random() - 0.5) * 100}px)`;
                        sparkle.style.opacity = '0';
                    }, Math.random() * 300);
                }
                setTimeout(() => {
                    effectContainer.remove();
                }, 2000);
            }
        }
        
        function initPhoneChat() {
            const phoneScreen = document.getElementById('phoneScreen');
            phoneScreen.innerHTML = '';
            const initialMessage = document.createElement('div');
            initialMessage.className = 'message incoming';
            initialMessage.textContent = 'ä½ å¥½ï¼Œ...ä½ éœ€è¦ä»€éº¼å¹«åŠ©å—ï¼Ÿ';
            phoneScreen.appendChild(initialMessage);
        }
        
        function initTreasureBox() {
            const treasureBox = document.getElementById('treasureBox');
            treasureBox.classList.remove('open');
            treasureBox.addEventListener('click', function() {
                const input = document.getElementById('stage4Input').value;
                if (input === answers.stage4) {
                    treasureBox.classList.add('open');
                    createEffect(treasureBox, 'sparkle');
                    setTimeout(() => {
                        document.getElementById('stage4Btn').click();
                    }, 2000);
                } else {
                    treasureBox.classList.add('shake');
                    setTimeout(() => {
                        treasureBox.classList.remove('shake');
                    }, 500);
                    document.getElementById('stage4Error').textContent = 'å¯†ç¢¼éŒ¯èª¤ï¼Œå¯¶ç®±æ‹’çµ•æ‰“é–‹';
                }
            });
        }
        
        function createEndingEffect() {
            const endingEffect = document.getElementById('endingEffect');
            createEffect(endingEffect.parentElement, 'confetti');
            const title = document.querySelector('#ending .stage-title');
            title.classList.add('glow');
            setTimeout(() => {
                createEffect(endingEffect.parentElement, 'sparkle');
            }, 2000);
            setTimeout(() => {
                createEffect(endingEffect.parentElement, 'confetti');
            }, 4000);
        }
        
        function checkAnswer(stage, input) {
            input = input.trim().toLowerCase();
            if (input === answers[stage].toLowerCase()) return true;
            if (alternativeAnswers[stage]) {
                for (let i = 0; i < alternativeAnswers[stage].length; i++) {
                    if (input === alternativeAnswers[stage][i].toLowerCase() || 
                        input.includes(alternativeAnswers[stage][i].toLowerCase())) {
                        return true;
                    }
                }
            }
            return false;
        }
        
        document.getElementById('showHint1').addEventListener('click', function() {
            document.getElementById('hint1').classList.toggle('show');
            this.textContent = document.getElementById('hint1').classList.contains('show') ? 'éš±è—' : 'ä¸‹ä¸€ç«™åœ°é»';
        });
        document.getElementById('showHint2').addEventListener('click', function() {
            document.getElementById('hint2').classList.toggle('show');
            this.textContent = document.getElementById('hint2').classList.contains('show') ? 'éš±è—' : 'ä¸‹ä¸€ç«™åœ°é»';
        });
        document.getElementById('showHint3').addEventListener('click', function() {
            document.getElementById('hint3').classList.toggle('show');
            this.textContent = document.getElementById('hint3').classList.contains('show') ? 'éš±è—' : 'ä¸‹ä¸€ç«™åœ°é»';
        });
        document.getElementById('showHint4').addEventListener('click', function() {
            document.getElementById('hint4').classList.toggle('show');
            this.textContent = document.getElementById('hint4').classList.contains('show') ? 'éš±è—' : 'ä¸‹ä¸€ç«™åœ°é»';
        });
        document.getElementById('showHint5').addEventListener('click', function() {
            document.getElementById('hint5').classList.toggle('show');
            this.textContent = document.getElementById('hint5').classList.contains('show') ? 'éš±è—' : 'ä¸‹ä¸€ç«™åœ°é»';
        });
        document.getElementById('showHint6').addEventListener('click', function() {
            document.getElementById('hint6').classList.toggle('show');
            this.textContent = document.getElementById('hint6').classList.contains('show') ? 'éš±è—' : 'ä¸‹ä¸€ç«™åœ°é»';
        });
        
        document.getElementById('gameStartBtn').addEventListener('click', function() {
            document.querySelector('.start-screen').style.display = 'none';
            document.querySelector('.game-container').style.display = 'block';
            updateProgress();
            setTimeout(() => {
                showEnvelope(0);
            }, 500);
        });
        
        document.getElementById('startBtn').addEventListener('click', function() {
            switchStage(0, 1);
        });
        
        document.getElementById('stage1Btn').addEventListener('click', function() {
            const input = document.getElementById('stage1Input').value.trim();
            const errorMsg = document.getElementById('stage1Error');
            const keyEffect = document.querySelector('#stage1 .key-effect');
            if (input === answers.stage1) {
                errorMsg.textContent = '';
                createEffect(this.parentElement, 'sparkle');
                keyEffect.style.display = 'block';
                setTimeout(() => {
                    keyEffect.classList.add('show');
                }, 10);
                this.style.transform = 'scale(1.1)';
                setTimeout(() => {
                    this.style.transform = '';
                }, 300);
                setTimeout(() => {
                    switchStage(1, 2);
                    keyEffect.classList.remove('show');
                    setTimeout(() => {
                        keyEffect.style.display = 'none';
                    }, 500);
                }, 2000);
            } else {
                errorMsg.textContent = 'é€™ä¸æ˜¯æ­£ç¢ºçš„æ•¸å­—åºåˆ—ï¼Œç¹¼çºŒå°‹æ‰¾ç†Ÿæ‚‰çš„å·´å£«ç·šä¸­çš„å¯†ç¢¼';
                this.classList.add('shake');
                setTimeout(() => {
                    this.classList.remove('shake');
                }, 500);
            }
        });
        
        document.getElementById('stage2Btn').addEventListener('click', function() {
            const input = document.getElementById('stage2Input').value.trim().toLowerCase();
            const errorMsg = document.getElementById('stage2Error');
            const phoneScreen = document.getElementById('phoneScreen');
            const keyEffect = document.querySelector('#stage2 .key-effect');
            const userMessage = document.createElement('div');
            userMessage.className = 'message outgoing';
            userMessage.textContent = document.getElementById('stage2Input').value;
            phoneScreen.appendChild(userMessage);
            phoneScreen.scrollTop = phoneScreen.scrollHeight;
            const typingIndicator = document.createElement('div');
            typingIndicator.className = 'message incoming';
            typingIndicator.innerHTML = '<span style="opacity: 0.7">...</span>';
            phoneScreen.appendChild(typingIndicator);
            setTimeout(() => {
                phoneScreen.removeChild(typingIndicator);
                if (checkAnswer('stage2', input)) {
                    errorMsg.textContent = '';
                    const replyMessage = document.createElement('div');
                    replyMessage.className = 'message incoming';
                    replyMessage.textContent = 'æˆ‘æ˜¯å–„åŒ¯çš„ç¤¾å·¥ã€‚ä½ ç¾åœ¨æ‡‰è©²å‰å¾€ç´…è±é“ï¼Œå¯èƒ½æœƒæ‰¾åˆ°æ›´å¤šç·šç´¢ã€‚';
                    phoneScreen.appendChild(replyMessage);
                    phoneScreen.scrollTop = phoneScreen.scrollHeight;
                    keyEffect.style.display = 'block';
                    setTimeout(() => {
                        keyEffect.classList.add('show');
                    }, 10);
                    this.style.transform = 'scale(1.1)';
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 300);
                    setTimeout(() => {
                        switchStage(2, 3);
                        keyEffect.classList.remove('show');
                        setTimeout(() => {
                            keyEffect.style.display = 'none';
                        }, 500);
                    }, 3000);
                } else {
                    const replyMessage = document.createElement('div');
                    replyMessage.className = 'message incoming';
                    replyMessage.textContent = 'æˆ‘ä¸å¤ªæ˜ç™½ä½ åœ¨èªªä»€éº¼...';
                    phoneScreen.appendChild(replyMessage);
                    phoneScreen.scrollTop = phoneScreen.scrollHeight;
                    errorMsg.textContent = 'å˜—è©¦ç›´æ¥è©¢å•å°æ–¹çš„èº«ä»½';
                }
            }, 1200);
            document.getElementById('stage2Input').value = '';
        });
        
        document.getElementById('stage3Btn').addEventListener('click', function() {
            const input = document.getElementById('stage3Input').value.trim().toLowerCase();
            const errorMsg = document.getElementById('stage3Error');
            const keyEffect = document.querySelector('#stage3 .key-effect');
            if (checkAnswer('stage3', input)) {
                errorMsg.textContent = '';
                createEffect(this.parentElement, 'sparkle');
                keyEffect.style.display = 'block';
                setTimeout(() => {
                    keyEffect.classList.add('show');
                }, 10);
                this.style.transform = 'scale(1.1)';
                setTimeout(() => {
                    this.style.transform = '';
                }, 300);
                setTimeout(() => {
                    switchStage(3, 4);
                    keyEffect.classList.remove('show');
                    setTimeout(() => {
                        keyEffect.style.display = 'none';
                    }, 500);
                }, 2000);
            } else {
                errorMsg.textContent = 'é€™å€‹åœ°æ–¹ä¼¼ä¹ä¸æ˜¯ç¤¾å€æ´»å‹•çš„ä¸»è¦å ´æ‰€ï¼Œç¹¼çºŒå°‹æ‰¾';
                this.classList.add('shake');
                setTimeout(() => {
                    this.classList.remove('shake');
                }, 500);
            }
        });
        
        document.getElementById('stage4Btn').addEventListener('click', function() {
            const input = document.getElementById('stage4Input').value;
            const errorMsg = document.getElementById('stage4Error');
            const treasureBox = document.getElementById('treasureBox');
            const keyEffect = document.querySelector('#stage4 .key-effect');
            if (input === answers.stage4) {
                errorMsg.textContent = '';
                if (!treasureBox.classList.contains('open')) {
                    treasureBox.classList.add('open');
                    createEffect(treasureBox, 'sparkle');
                }
                keyEffect.style.display = 'block';
                setTimeout(() => {
                    keyEffect.classList.add('show');
                }, 10);
                this.style.transform = 'scale(1.1)';
                setTimeout(() => {
                    this.style.transform = '';
                }, 300);
                setTimeout(() => {
                    switchStage(4, 5);
                    keyEffect.classList.remove('show');
                    setTimeout(() => {
                        keyEffect.style.display = 'none';
                    }, 500);
                }, 2000);
            } else {
                errorMsg.textContent = 'å¯†ç¢¼éŒ¯èª¤ï¼Œå¯¶ç®±æ‹’çµ•æ‰“é–‹';
                this.classList.add('shake');
                setTimeout(() => {
                    this.classList.remove('shake');
                }, 500);
            }
        });
        
        document.getElementById('stage5Btn').addEventListener('click', function() {
            const input = document.getElementById('stage5Input').value.trim().toLowerCase();
            const errorMsg = document.getElementById('stage5Error');
            const keyEffect = document.querySelector('#stage5 .key-effect');
            if (checkAnswer('stage5', input)) {
                errorMsg.textContent = '';
                createEffect(this.parentElement, 'sparkle');
                keyEffect.style.display = 'block';
                setTimeout(() => {
                    keyEffect.classList.add('show');
                }, 10);
                this.style.transform = 'scale(1.1)';
                setTimeout(() => {
                    this.style.transform = '';
                }, 300);
                setTimeout(() => {
                    switchStage(5, 6);
                    keyEffect.classList.remove('show');
                    setTimeout(() => {
                        keyEffect.style.display = 'none';
                    }, 500);
                }, 2000);
            } else {
                errorMsg.textContent = 'é€™ä¸æ˜¯é€™äº›é£Ÿç‰©çš„å…±åŒä¾†æºï¼Œå†æ€è€ƒè³¼è²·æ–°é®®é£Ÿæçš„åœ°æ–¹';
                this.classList.add('shake');
                setTimeout(() => {
                    this.classList.remove('shake');
                }, 500);
            }
        });
        
        document.getElementById('stage6Btn').addEventListener('click', function() {
            const input = document.getElementById('stage6Input').value.trim().toLowerCase();
            const errorMsg = document.getElementById('stage6Error');
            const keyEffect = document.querySelector('#stage6 .key-effect');
            if (checkAnswer('stage6', input)) {
                errorMsg.textContent = '';
                createEffect(this.parentElement, 'confetti');
                keyEffect.style.display = 'block';
                setTimeout(() => {
                    keyEffect.classList.add('show');
                }, 10);
                this.style.transform = 'scale(1.1)';
                setTimeout(() => {
                    this.style.transform = '';
                }, 300);
                setTimeout(() => {
                    switchStage(6, 7);
                    keyEffect.classList.remove('show');
                    setTimeout(() => {
                        keyEffect.style.display = 'none';
                    }, 500);
                }, 2000);
            } else {
                errorMsg.textContent = 'ç•¶ä¸­åªæœ‰ä¸€å€‹ç­”æ¡ˆæ˜¯çœŸçš„';
                this.classList.add('shake');
                setTimeout(() => {
                    this.classList.remove('shake');
                }, 500);
            }
        });
        
        document.getElementById('restartBtn').addEventListener('click', function() {
            location.reload();
        });
        
        document.querySelectorAll('.food-item').forEach(item => {
            item.addEventListener('click', function() {
                createEffect(this, 'sparkle');
                this.style.backgroundColor = 'rgba(74, 20, 140, 0.3)';
                setTimeout(() => {
                    const allSelected = Array.from(document.querySelectorAll('.food-item'))
                        .every(el => el.style.backgroundColor === 'rgba(74, 20, 140, 0.3)');
                    if (allSelected) {
                        document.getElementById('stage5Input').value = 'è¡—å¸‚';
                        document.getElementById('stage5Btn').click();
                    }
                }, 500);
            });
        });
        
        document.getElementById('activityRoom').addEventListener('click', function() {
            document.getElementById('stage3Input').value = 'æ´»å‹•å®¤';
            createEffect(this, 'sparkle');
        });
        document.getElementById('infoCenter').addEventListener('click', function() {
            document.getElementById('stage3Input').value = 'è³‡è¨Šè™•';
            createEffect(this, 'sparkle');
        });
        document.getElementById('restArea').addEventListener('click', function() {
            document.getElementById('stage3Input').value = 'ä¼‘æ†©è™•';
            createEffect(this, 'sparkle');
            setTimeout(() => {
                document.getElementById('stage3Btn').click();
            }, 500);
        });
        
        document.querySelectorAll('#finalMap .location').forEach(location => {
            location.addEventListener('click', function() {
                const locationName = this.querySelector('.location-label').textContent;
                document.getElementById('stage6Input').value = locationName;
                createEffect(this, 'sparkle');
                if (locationName === 'å–„åŒ¯') {
                    setTimeout(() => {
                        document.getElementById('stage6Btn').click();
                    }, 500);
                }
            });
        });
        
        document.getElementById('phoneButton').addEventListener('click', function() {
            this.style.backgroundColor = '#555';
            setTimeout(() => {
                this.style.backgroundColor = '#333';
            }, 200);
        });
    });
</script>

</body>
</html>

